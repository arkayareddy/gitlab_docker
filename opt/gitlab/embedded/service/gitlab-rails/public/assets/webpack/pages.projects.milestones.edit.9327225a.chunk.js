(this.webpackJsonp=this.webpackJsonp||[]).push([[241],{146:function(e,t,n){n("HVBj"),n("gjpc"),e.exports=n("P5Rw")},"3nve":function(e,t,n){"use strict";var a=n("3a3M"),r=n.n(a),i=n("Ylta"),o=n("bplN"),s=n("FVJN");t.a=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];new i.a,new o.a,new s.a(r()(".milestone-form"),{emojis:!0,members:e,issues:e,mergeRequests:e,epics:e,milestones:e,labels:e,snippets:e})}},CX32:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("va8A"),n("z4I3"),n("dj/k"),n("x/6R"),n("WQYg"),n("MRnW"),n("EfZm"),n("GzNv"),n("tbvx"),n("orcL");var a=n("t6Yz"),r=n.n(a),i=n("yQ8t");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=c(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=t.call(this),r.a.bind("g p",(function(){return Object(i.a)(".shortcuts-project")})),r.a.bind("g v",(function(){return Object(i.a)(".shortcuts-project-activity")})),r.a.bind("g r",(function(){return Object(i.a)(".shortcuts-project-releases")})),r.a.bind("g f",(function(){return Object(i.a)(".shortcuts-tree")})),r.a.bind("g c",(function(){return Object(i.a)(".shortcuts-commits")})),r.a.bind("g j",(function(){return Object(i.a)(".shortcuts-builds")})),r.a.bind("g n",(function(){return Object(i.a)(".shortcuts-network")})),r.a.bind("g d",(function(){return Object(i.a)(".shortcuts-repository-charts")})),r.a.bind("g i",(function(){return Object(i.a)(".shortcuts-issues")})),r.a.bind("g b",(function(){return Object(i.a)(".shortcuts-issue-boards")})),r.a.bind("g m",(function(){return Object(i.a)(".shortcuts-merge_requests")})),r.a.bind("g w",(function(){return Object(i.a)(".shortcuts-wiki")})),r.a.bind("g s",(function(){return Object(i.a)(".shortcuts-snippets")})),r.a.bind("g k",(function(){return Object(i.a)(".shortcuts-kubernetes")})),r.a.bind("g e",(function(){return Object(i.a)(".shortcuts-environments")})),r.a.bind("g l",(function(){return Object(i.a)(".shortcuts-metrics")})),r.a.bind("i",(function(){return Object(i.a)(".shortcuts-new-issue")})),e}return n}(n("v+Mp").a)},P5Rw:function(e,t,n){"use strict";n.r(t);var a=n("3nve");document.addEventListener("DOMContentLoaded",(function(){return Object(a.a)()}))},ZeWX:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n("t3Gg"),n("+xeR");var a=n("3a3M"),r=n.n(a),i=n("06tH"),o=n.n(i),s=n("/lV4"),c=n("3twG");n("kO4A"),n("OZM5"),n("x/6R"),n("Z5ek"),n("yaFd"),n("8Qi2"),n("EWC9"),n("MRnW"),n("tbvx"),n("orcL");var u=function(e){return e.reduce((function(e,t){var n=t.name,a=t.value;return Object.assign(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,a))}),{})},l=n("2ibD"),d=n("XRO8"),f=n("k/Fq");function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=r()("ul.clone-options-dropdown"),n=r()("#project_clone"),a=r()(".js-git-clone-holder .js-clone-dropdown-label"),i=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),s=a.text().trim();s.length>0&&r()("a:contains('".concat(s,"')"),t).addClass("is-active"),r()("a",t).on("click",(function(e){e.preventDefault();var a=r()(e.currentTarget),o=a.attr("href"),s=a.data("cloneType");r()(".is-active",t).removeClass("is-active"),r()('a[data-clone-type="'.concat(s,'"]')).each((function(){var e=r()(this),t=e.find(".dropdown-menu-inner-title").text(),n=e.closest(".project-clone-holder").find(".js-clone-dropdown-label");e.toggleClass("is-active"),n.text(t)})),i?i.dataset.clipboardText=o:n.val(o),r()(".js-git-empty .js-clone").text(o)})),e.initRefSwitcher(),r()(".project-refs-select").on("change",(function(){return r()(this).parents("form").submit()})),r()(".hide-no-ssh-message").on("click",(function(e){return o.a.set("hide_no_ssh_message","false"),r()(this).parents(".no-ssh-key-message").remove(),e.preventDefault()})),r()(".hide-no-password-message").on("click",(function(e){return o.a.set("hide_no_password_message","false"),r()(this).parents(".no-password-message").remove(),e.preventDefault()})),r()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(e){var t=r()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(t);return o.a.set(n,"false"),r()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),e.preventDefault()})),e.projectSelectDropdown()}var t,n,a;return t=e,a=[{key:"projectSelectDropdown",value:function(){Object(f.a)(),r()(".project-item-select").on("click",(function(t){return e.changeProject(r()(t.currentTarget).val())}))}},{key:"changeProject",value:function(e){return window.location=e}},{key:"initRefSwitcher",value:function(){var e=document.createElement("li"),t=document.createElement("a");return t.href="#",r()(".js-project-refs-dropdown").each((function(){var n,a,i,o=r()(this),f=o.data("selected"),h=o.data("fieldName"),p=Boolean(o.data("visit")),b=o.closest("form"),v=b.attr("action"),g=Object(c.n)((n=b[0],a=new FormData(n),i=Array.from(a.keys()).map((function(e){var t=a.getAll(e);return{name:e,value:1===(t=t.filter((function(e){return e}))).length?t[0]:t}})),u(i)),v);return o.glDropdown({data:function(e,t){l.a.get(o.data("refsUrl"),{params:{ref:o.data("ref"),search:e}}).then((function(e){var n=e.data;return t(n)})).catch((function(){return Object(d.a)(Object(s.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:o.data("inputFieldName"),fieldName:h,renderRow:function(n){var a,r,i,o=e.cloneNode(!1),s=t.cloneNode(!1);return n===f&&(s.className="is-active"),s.textContent=n,s.dataset.ref=n,n.length>0&&p&&(s.href=Object(c.n)((i=n,(r=h)in(a={})?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i,a),g)),o.appendChild(s),o},id:function(e,t){return t.attr("data-ref")},toggleLabel:function(e,t){return t.text().trim()},clicked:function(e){var t=e.e;p||t.preventDefault()}})}))}}],(n=null)&&h(t.prototype,n),a&&h(t,a),e}()},bplN:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n("9U97"),n("t3Gg"),n("Z5ek"),n("MRnW"),n("IdsT"),n("GzNv"),n("pBsb");var a=n("3a3M"),r=n.n(a),i=n("+XPY"),o=n.n(i),s=n("a+C/"),c=n.n(s),u=n("/lV4"),l=n("2ibD"),d=n("bOix"),f=n("KQYO");function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function b(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.$dropdown,a=t.$loading;h(this,e);var i=n.closest(".dropdown"),o=n.closest(".block");this.$loading=a,this.$dropdown=n,this.$dropdownParent=i,this.$datePicker=i.find(".js-due-date-calendar"),this.$block=o,this.$sidebarCollapsedValue=o.find(".sidebar-collapsed-icon"),this.$selectbox=n.closest(".selectbox"),this.$value=o.find(".value"),this.$valueContent=o.find(".value-content"),this.$sidebarValue=r()(".js-due-date-sidebar-value",o),this.fieldName=n.data("fieldName"),this.abilityName=n.data("abilityName"),this.issueUpdateURL=n.data("issueUpdate"),this.rawSelectedDate=null,this.displayedDate=null,this.datePayload=null,this.initGlDropdown(),this.initRemoveDueDate(),this.initDatePicker()}return b(e,[{key:"initGlDropdown",value:function(){var e=this;this.$dropdown.glDropdown({opened:function(){e.$datePicker.data("pikaday").show()},hidden:function(){e.$selectbox.hide(),e.$value.css("display","")},shouldPropagate:!1})}},{key:"initDatePicker",value:function(){var e=this,t=r()("input[name='".concat(this.fieldName,"']")),n=new o.a({field:t.get(0),theme:"gitlab-theme",format:"yyyy-mm-dd",parse:function(e){return Object(d.o)(e)},toString:function(e){return Object(d.q)(e)},onSelect:function(a){t.val(n.toString(a)),e.$dropdown.hasClass("js-issue-boards-due-date")?(f.c.detail.issue.dueDate=t.val(),e.updateIssueBoardIssue()):e.saveDueDate(!0)},firstDay:gon.first_day_of_week});n.setDate(Object(d.o)(t.val())),this.$datePicker.append(n.el),this.$datePicker.data("pikaday",n)}},{key:"initRemoveDueDate",value:function(){var e=this;this.$block.on("click",".js-remove-due-date",(function(t){var n=e.$datePicker.data("pikaday");t.preventDefault(),n.setDate(null),e.$dropdown.hasClass("js-issue-boards-due-date")?(f.c.detail.issue.dueDate="",e.updateIssueBoardIssue()):(r()("input[name='".concat(e.fieldName,"']")).val(""),e.saveDueDate(!1))}))}},{key:"saveDueDate",value:function(e){this.parseSelectedDate(),this.prepSelectedDate(),this.submitSelectedDate(e)}},{key:"parseSelectedDate",value:function(){if(this.rawSelectedDate=r()("input[name='".concat(this.fieldName,"']")).val(),this.rawSelectedDate.length){var e=this.rawSelectedDate.split("-").map((function(e){return parseInt(e,10)})),t=new Date(e[0],e[1]-1,e[2]);this.displayedDate=c()(t,"mmm d, yyyy")}else this.displayedDate=Object(u.a)("None")}},{key:"prepSelectedDate",value:function(){var e={};e[this.abilityName]={},e[this.abilityName].due_date=this.rawSelectedDate,this.datePayload=e}},{key:"updateIssueBoardIssue",value:function(){var e=this;this.$loading.fadeIn(),this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide(),this.$value.css("display","");var t=function(){e.$loading.fadeOut()};f.c.detail.issue.update(this.$dropdown.attr("data-issue-update")).then(t).catch(t)}},{key:"submitSelectedDate",value:function(e){var t=this,n=this.datePayload[this.abilityName].due_date,a=this.displayedDate!==Object(u.a)("None"),i=a?"bold":"no-value";return this.$loading.removeClass("hidden").fadeIn(),e&&(this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide()),this.$value.css("display",""),this.$valueContent.html("<span class='".concat(i,"'>").concat(this.displayedDate,"</span>")),this.$sidebarValue.html(this.displayedDate),r()(".js-remove-due-date-holder").toggleClass("hidden",n.length),l.a.put(this.issueUpdateURL,this.datePayload).then((function(){var r=a?"".concat(Object(u.a)("Due date"),"<br />").concat(n," (").concat(Object(d.t)(n),")"):Object(u.a)("Due date");return e&&(t.$dropdown.trigger("loaded.gl.dropdown"),t.$dropdown.dropdown("toggle")),t.$sidebarCollapsedValue.attr("data-original-title",r),t.$loading.fadeOut()}))}}]),e}(),g=function(){function e(){h(this,e),this.initMilestoneDatePicker(),this.initIssuableSelect()}return b(e,[{key:"initMilestoneDatePicker",value:function(){r()(".datepicker").each((function(){var e=r()(this),t=e.val(),n=new o.a({field:e.get(0),theme:"gitlab-theme animate-picker",format:"yyyy-mm-dd",container:e.parent().get(0),parse:function(e){return Object(d.o)(e)},toString:function(e){return Object(d.q)(e)},onSelect:function(t){e.val(n.toString(t))},firstDay:gon.first_day_of_week});n.setDate(Object(d.o)(t)),e.data("pikaday",n)})),r()(".js-clear-due-date,.js-clear-start-date").on("click",(function(e){e.preventDefault(),r()(e.target).siblings(".datepicker").data("pikaday").setDate(null)}))}},{key:"initIssuableSelect",value:function(){var e=r()(".js-issuable-update .due_date").find(".block-loading").hide();r()(".js-due-date-select").each((function(t,n){var a=r()(n);new v({$dropdown:a,$loading:e})}))}}]),e}()},gjpc:function(e,t,n){"use strict";n.r(t);var a=n("ZeWX"),r=n("CX32");document.addEventListener("DOMContentLoaded",(function(){new a.a,new r.a}))},"k/Fq":function(e,t,n){"use strict";n("9U97"),n("8Qi2"),n("MRnW"),n("jaBk");var a=n("3a3M"),r=n.n(a),i=n("qPgm"),o=(n("gyUR"),n("4ql4"),n("IdsT"),n("pBsb"),n("n7CP"));function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projectSelectInput=r()(t),this.newItemBtn=r()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var t,a,i;return t=e,(a=[{key:"bindEvents",value:function(){var e=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(t){return e.openDropdown(t)})),this.newItemBtn.on("click",(function(t){e.getProjectFromLocalStorage()||(t.preventDefault(),e.openDropdown(t))})),this.projectSelectInput.on("change",(function(){return e.selectProject()}))}},{key:"initLocalStorage",value:function(){o.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(e){n.e(311).then(n.t.bind(null,"p9g0",7)).then((function(){r()(e.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var e=JSON.parse(this.projectSelectInput.val()),t={url:"".concat(e.url,"/").concat(this.projectSelectInput.data("relativePath")),name:e.name};this.setNewItemBtnAttributes(t),this.setProjectInLocalStorage(t)}},{key:"setBtnTextFromLocalStorage",value:function(){var e=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(e)}},{key:"setNewItemBtnAttributes",value:function(e){e?(this.newItemBtn.attr("href",e.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(e.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var e=localStorage.getItem(this.localStorageKey);return JSON.parse(e)}},{key:"setProjectInLocalStorage",value:function(e){var t=JSON.stringify(e);localStorage.setItem(this.localStorageKey,t)}},{key:"deriveTextVariants",value:function(){var e=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:e,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&s(t.prototype,a),i&&s(t,i),e}(),u=n("/lV4"),l=function(){r()(".ajax-project-select").each((function(e,t){var n,a=this,o=r()(t).data("simpleFilter")||!1,s=r()(t).data("select2");return this.groupId=r()(t).data("groupId"),this.userId=r()(t).data("userId"),this.includeGroups=r()(t).data("includeGroups"),this.allProjects=r()(t).data("allProjects")||!1,this.orderBy=r()(t).data("orderBy")||"id",this.withIssuesEnabled=r()(t).data("withIssuesEnabled"),this.withMergeRequestsEnabled=r()(t).data("withMergeRequestsEnabled"),this.withShared=void 0===r()(t).data("withShared")||r()(t).data("withShared"),this.includeProjectsInSubgroups=r()(t).data("includeProjectsInSubgroups")||!1,this.allowClear=r()(t).data("allowClear")||!1,n=Object(u.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(u.d)("ProjectSelect| or group")),r()(t).select2({placeholder:n,minimumInputLength:0,query:function(e){var t,n=function(t){var n={results:t};return e.callback(n)};return t=a.includeGroups?function(t){return i.a.groups(e.term,{},(function(e){var a=e.concat(t);return n(a)}))}:n,a.groupId?i.a.groupProjects(a.groupId,e.term,{search_namespaces:!0,with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,with_shared:a.withShared,include_subgroups:a.includeProjectsInSubgroups},t):a.userId?i.a.userProjects(a.userId,e.term,{with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,with_shared:a.withShared,include_subgroups:a.includeProjectsInSubgroups},t):i.a.projects(e.term,{order_by:a.orderBy,with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,membership:!a.allProjects},t)},id:function(e){return o?e.id:JSON.stringify({name:e.name,url:e.web_url})},text:function(e){return e.name_with_namespace||e.name},initSelection:function(e,t){return i.a.project(e.val()).then((function(e){var n=e.data;return t(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),s||o?t:new c(t)}))};t.a=function(){return n.e(311).then(n.t.bind(null,"p9g0",7)).then(l).catch((function(){}))}}},[[146,1,0,2,5,6,7]]]);
//# sourceMappingURL=pages.projects.milestones.edit.9327225a.chunk.js.map