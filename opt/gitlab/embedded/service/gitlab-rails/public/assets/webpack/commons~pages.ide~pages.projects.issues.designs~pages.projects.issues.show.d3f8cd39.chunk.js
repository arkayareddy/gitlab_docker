(this.webpackJsonp=this.webpackJsonp||[]).push([[51],{CdyC:function(e,t,i){"use strict";i("+xU6"),i("IdsT"),i("pBsb");var n=i("MV2A"),o=i("len0"),s=i("SNRI"),r={components:{GlLink:n.a,Icon:o.a},props:{path:{type:String,required:!0},filePath:{type:String,required:!1,default:""},fileSize:{type:Number,required:!1,default:0}},computed:{fileSizeReadable:function(){return Object(s.b)(this.fileSize)},fileName:function(){return(this.filePath||this.path).split("/").pop()}}},a=i("tBpV"),d=Object(a.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-container"},[i("div",{staticClass:"file-content"},[i("p",{staticClass:"prepend-top-10 file-info"},[e._v("\n      "+e._s(e.fileName)+"\n      "),e.fileSize>0?[e._v("\n        ("+e._s(e.fileSizeReadable)+")\n      ")]:e._e()],2),e._v(" "),i("gl-link",{staticClass:"btn btn-default",attrs:{href:e.path,rel:"nofollow",download:e.fileName,target:"_blank"}},[i("icon",{staticClass:"float-left gl-mr-3",attrs:{size:16,name:"download"}}),e._v("\n      "+e._s(e.__("Download"))+"\n    ")],1)],1)])}),[],!1,null,null,null);t.a=d.exports},JCWm:function(e,t,i){"use strict";i("+xU6");var n=i("h7kv"),o=i.n(n),s=i("SNRI"),r={props:{path:{type:String,required:!0},fileSize:{type:Number,required:!1,default:0},renderInfo:{type:Boolean,default:!0,required:!1},innerCssClasses:{type:[Array,Object,String],required:!1,default:""}},data:function(){return{width:0,height:0}},computed:{fileSizeReadable:function(){return Object(s.b)(this.fileSize)},hasFileSize:function(){return this.fileSize>0},hasDimensions:function(){return this.width&&this.height}},beforeDestroy:function(){window.removeEventListener("resize",this.resizeThrottled,!1)},mounted:function(){this.onImgLoad(),this.resizeThrottled=o()(this.onImgLoad,400),window.addEventListener("resize",this.resizeThrottled,!1)},methods:{onImgLoad:function(){requestIdleCallback(this.calculateImgSize,{timeout:1e3})},calculateImgSize:function(){var e=this,t=this.$refs.contentImg;t&&(this.width=t.naturalWidth,this.height=t.naturalHeight,this.$nextTick((function(){e.$emit("imgLoaded",{width:e.width,height:e.height,renderedWidth:t.clientWidth,renderedHeight:t.clientHeight})})))}}},a=i("tBpV"),d=Object(a.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"position-relative",class:e.innerCssClasses},[i("img",{ref:"contentImg",attrs:{src:e.path},on:{load:e.onImgLoad}}),e._v(" "),e._t("image-overlay")],2),e._v(" "),e.renderInfo?i("p",{staticClass:"image-info"},[e.hasFileSize?[e._v("\n      "+e._s(e.fileSizeReadable)+"\n    ")]:e._e(),e._v(" "),e.hasFileSize&&e.hasDimensions?[e._v("\n      |\n    ")]:e._e(),e._v(" "),e.hasDimensions?[i("strong",[e._v(e._s(e.s__("ImageViewerDimensions|W")))]),e._v(": "+e._s(e.width)+" | "),i("strong",[e._v(e._s(e.s__("ImageViewerDimensions|H")))]),e._v(": "+e._s(e.height)+"\n    ")]:e._e()],2):e._e()])}),[],!1,null,null,null);t.a=d.exports},"x/Tb":function(e,t,i){"use strict";i("9U97"),i("S6uq"),i("+xU6");var n=i("BAGK"),o=i("JCWm"),s={components:{ImageViewer:o.a},props:{newPath:{type:String,required:!0},oldPath:{type:String,required:!0},newSize:{type:Number,required:!1,default:0},oldSize:{type:Number,required:!1,default:0}}},r=i("tBpV"),a=Object(r.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"two-up view d-flex"},[t("image-viewer",{staticClass:"wrap w-50",attrs:{path:this.oldPath,"file-size":this.oldSize,"render-info":!0,"inner-css-classes":"frame deleted"}}),this._v(" "),t("image-viewer",{staticClass:"wrap w-50",attrs:{path:this.newPath,"file-size":this.newSize,"render-info":!0,"inner-css-classes":["frame","added"]}},[this._t("image-overlay",null,{slot:"image-overlay"})],2)],1)}),[],!1,null,null,null).exports,d=i("h7kv"),l=i.n(d);function c(e){return e?"".concat(e,"px"):""}var h={components:{ImageViewer:o.a},props:{newPath:{type:String,required:!0},oldPath:{type:String,required:!0}},data:function(){return{dragging:!1,swipeOldImgInfo:null,swipeNewImgInfo:null,swipeMaxWidth:void 0,swipeMaxHeight:void 0,swipeBarPos:1,swipeWrapWidth:0}},computed:{swipeMaxPixelWidth:function(){return c(this.swipeMaxWidth)},swipeMaxPixelHeight:function(){return c(this.swipeMaxHeight)},swipeWrapPixelWidth:function(){return c(this.swipeWrapWidth)},swipeBarPixelPos:function(){return c(this.swipeBarPos)}},beforeDestroy:function(){window.removeEventListener("resize",this.resizeThrottled,!1),document.body.removeEventListener("mouseup",this.stopDrag),document.body.removeEventListener("mousemove",this.dragMove),document.body.removeEventListener("touchend",this.stopDrag),document.body.removeEventListener("touchmove",this.dragMove)},mounted:function(){window.addEventListener("resize",this.resize,!1)},methods:{dragMove:function(e){if(this.dragging){var t=(e.pageX||e.touches[0].pageX)-this.$refs.swipeFrame.getBoundingClientRect().left,i=this.$refs.swipeFrame.clientWidth;t<=0?t=0:t>i&&(t=i),this.swipeWrapWidth=t/i*100,this.swipeBarPos=t}},startDrag:function(){this.dragging=!0,document.body.addEventListener("mousemove",this.dragMove),document.body.addEventListener("touchmove",this.dragMove)},stopDrag:function(){this.dragging=!1,document.body.removeEventListener("mousemove",this.dragMove),document.body.removeEventListener("touchmove",this.dragMove)},prepareSwipe:function(){this.swipeOldImgInfo&&this.swipeNewImgInfo&&this.swipeOldImgInfo.renderedWidth>0&&(this.swipeMaxWidth=Math.max(this.swipeOldImgInfo.renderedWidth,this.swipeNewImgInfo.renderedWidth)+2,this.swipeMaxHeight=Math.max(this.swipeOldImgInfo.renderedHeight,this.swipeNewImgInfo.renderedHeight)+2,document.body.addEventListener("mouseup",this.stopDrag),document.body.addEventListener("touchend",this.stopDrag))},swipeNewImgLoaded:function(e){this.swipeNewImgInfo=e,this.prepareSwipe()},swipeOldImgLoaded:function(e){this.swipeOldImgInfo=e,this.prepareSwipe()},resize:l()((function(){this.swipeBarPos=0,this.swipeWrapWidth=0,this.prepareSwipe()}),400)}},u=Object(r.a)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"swipe view"},[i("div",{ref:"swipeFrame",staticClass:"swipe-frame",style:{width:e.swipeMaxPixelWidth,height:e.swipeMaxPixelHeight,"user-select":e.dragging?"none":null}},[i("image-viewer",{key:"swipeOldImg",ref:"swipeOldImg",staticClass:"frame deleted",attrs:{"render-info":!1,path:e.oldPath},on:{imgLoaded:e.swipeOldImgLoaded}}),e._v(" "),i("div",{ref:"swipeWrap",staticClass:"swipe-wrap",style:{width:e.swipeWrapWidth+"%"}},[i("image-viewer",{key:"swipeNewImg",staticClass:"frame added",style:{width:e.swipeMaxPixelWidth},attrs:{"render-info":!1,path:e.newPath},on:{imgLoaded:e.swipeNewImgLoaded}},[e._t("image-overlay",null,{slot:"image-overlay"})],2)],1),e._v(" "),i("span",{ref:"swipeBar",staticClass:"swipe-bar",style:{left:e.swipeBarPixelPos},on:{mousedown:e.startDrag,mouseup:e.stopDrag,touchstart:e.startDrag,touchend:e.stopDrag}},[i("span",{staticClass:"top-handle"}),e._v(" "),i("span",{staticClass:"bottom-handle"})])],1)])}),[],!1,null,null,null).exports,p={components:{ImageViewer:o.a},props:{newPath:{type:String,required:!0},oldPath:{type:String,required:!0}},data:function(){return{onionMaxWidth:void 0,onionMaxHeight:void 0,onionOldImgInfo:null,onionNewImgInfo:null,onionDraggerPos:0,onionOpacity:1,dragging:!1}},computed:{onionMaxPixelWidth:function(){return c(this.onionMaxWidth)},onionMaxPixelHeight:function(){return c(this.onionMaxHeight)},onionDraggerPixelPos:function(){return c(this.onionDraggerPos)}},beforeDestroy:function(){document.body.removeEventListener("mouseup",this.stopDrag),document.body.removeEventListener("touchend",this.stopDrag),document.body.removeEventListener("mousemove",this.dragMove),document.body.removeEventListener("touchmove",this.dragMove)},methods:{dragMove:function(e){if(this.dragging){var t=(e.pageX||e.touches[0].pageX)-this.$refs.dragTrack.getBoundingClientRect().left,i=this.$refs.dragTrack.clientWidth-this.$refs.dragger.clientWidth||100,n=t;n<0&&(n=0),n>i&&(n=i),this.onionOpacity=t/i,this.onionDraggerPos=n}},startDrag:function(){this.dragging=!0,document.body.style.userSelect="none",document.body.addEventListener("mousemove",this.dragMove),document.body.addEventListener("touchmove",this.dragMove)},stopDrag:function(){this.dragging=!1,document.body.style.userSelect="",document.body.removeEventListener("mousemove",this.dragMove),document.body.removeEventListener("touchmove",this.dragMove)},prepareOnionSkin:function(){this.onionOldImgInfo&&this.onionNewImgInfo&&(this.onionMaxWidth=Math.max(this.onionOldImgInfo.renderedWidth,this.onionNewImgInfo.renderedWidth),this.onionMaxHeight=Math.max(this.onionOldImgInfo.renderedHeight,this.onionNewImgInfo.renderedHeight),this.onionOpacity=1,this.onionDraggerPos=this.$refs.dragTrack.clientWidth-this.$refs.dragger.clientWidth||100,document.body.addEventListener("mouseup",this.stopDrag),document.body.addEventListener("touchend",this.stopDrag))},onionNewImgLoaded:function(e){this.onionNewImgInfo=e,this.prepareOnionSkin()},onionOldImgLoaded:function(e){this.onionOldImgInfo=e,this.prepareOnionSkin()}}},f=Object(r.a)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"onion-skin view"},[i("div",{staticClass:"onion-skin-frame",style:{width:e.onionMaxPixelWidth,height:e.onionMaxPixelHeight,"user-select":e.dragging?"none":null}},[i("div",{staticClass:"frame deleted",style:{width:e.onionMaxPixelWidth,height:e.onionMaxPixelHeight}},[i("image-viewer",{key:"onionOldImg",attrs:{"render-info":!1,path:e.oldPath},on:{imgLoaded:e.onionOldImgLoaded}})],1),e._v(" "),i("div",{ref:"addedFrame",staticClass:"added frame",style:{opacity:e.onionOpacity,width:e.onionMaxPixelWidth,height:e.onionMaxPixelHeight}},[i("image-viewer",{key:"onionNewImg",attrs:{"render-info":!1,path:e.newPath},on:{imgLoaded:e.onionNewImgLoaded}},[e._t("image-overlay",null,{slot:"image-overlay"})],2)],1),e._v(" "),i("div",{staticClass:"controls"},[i("div",{staticClass:"transparent"}),e._v(" "),i("div",{ref:"dragTrack",staticClass:"drag-track",on:{mousedown:e.startDrag,mouseup:e.stopDrag,touchstart:e.startDrag,touchend:e.stopDrag}},[i("div",{ref:"dragger",staticClass:"dragger",style:{left:e.onionDraggerPixelPos}})]),e._v(" "),i("div",{staticClass:"opaque"})])])])}),[],!1,null,null,null).exports,m={replaced:"replaced",new:"new",deleted:"deleted",renamed:"renamed"},g={twoup:"twoup",swipe:"swipe",onion:"onion"},w={components:{ImageViewer:o.a},props:{diffMode:{type:String,required:!0},newPath:{type:String,required:!0},oldPath:{type:String,required:!0},newSize:{type:Number,required:!1,default:0},oldSize:{type:Number,required:!1,default:0}},data:function(){return{mode:g.twoup}},computed:{imageViewComponent:function(){switch(this.mode){case g.twoup:return a;case g.swipe:return u;case g.onion:return f;default:return}},isNew:function(){return this.diffMode===m.new},isRenamed:function(){return this.diffMode===m.renamed},imagePath:function(){return this.isNew||this.isRenamed?this.newPath:this.oldPath}},methods:{changeMode:function(e){this.mode=e}},diffModes:m,imageViewMode:g},v=Object(r.a)(w,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"diff-file-container"},[e.diffMode===e.$options.diffModes.replaced?i("div",{staticClass:"diff-viewer"},[i("div",{staticClass:"image js-replaced-image"},[i(e.imageViewComponent,e._b({tag:"component"},"component",e.$props,!1),[e._t("image-overlay",null,{slot:"image-overlay"})],2)],1),e._v(" "),i("div",{staticClass:"view-modes"},[i("ul",{staticClass:"view-modes-menu"},[i("li",{class:{active:e.mode===e.$options.imageViewMode.twoup},on:{click:function(t){return e.changeMode(e.$options.imageViewMode.twoup)}}},[e._v("\n          "+e._s(e.s__("ImageDiffViewer|2-up"))+"\n        ")]),e._v(" "),i("li",{class:{active:e.mode===e.$options.imageViewMode.swipe},on:{click:function(t){return e.changeMode(e.$options.imageViewMode.swipe)}}},[e._v("\n          "+e._s(e.s__("ImageDiffViewer|Swipe"))+"\n        ")]),e._v(" "),i("li",{class:{active:e.mode===e.$options.imageViewMode.onion},on:{click:function(t){return e.changeMode(e.$options.imageViewMode.onion)}}},[e._v("\n          "+e._s(e.s__("ImageDiffViewer|Onion skin"))+"\n        ")])])])]):i("div",{staticClass:"diff-viewer"},[i("div",{staticClass:"image"},[i("image-viewer",{attrs:{path:e.imagePath,"file-size":e.isNew?e.newSize:e.oldSize,"inner-css-classes":["frame",{added:e.isNew,deleted:e.diffMode===e.$options.diffModes.deleted}]}},[e.isNew||e.isRenamed?e._t("image-overlay",null,{slot:"image-overlay"}):e._e()],2)],1)])])}),[],!1,null,null,null).exports,_={components:{DownloadViewer:i("CdyC").a},props:{diffMode:{type:String,required:!0},newPath:{type:String,required:!0},oldPath:{type:String,required:!0},projectPath:{type:String,required:!1,default:""}},diffModes:m},y=Object(r.a)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"diff-file-container"},[i("div",{staticClass:"diff-viewer"},[e.diffMode===e.$options.diffModes.replaced?i("div",{staticClass:"two-up view row"},[i("div",{staticClass:"col-sm-6 deleted"},[i("download-viewer",{attrs:{path:e.oldPath,"project-path":e.projectPath}})],1),e._v(" "),i("div",{staticClass:"col-sm-6 added"},[i("download-viewer",{attrs:{path:e.newPath,"project-path":e.projectPath}})],1)]):e.diffMode===e.$options.diffModes.new?i("div",{staticClass:"added"},[i("download-viewer",{attrs:{path:e.newPath,"project-path":e.projectPath}})],1):i("div",{staticClass:"deleted"},[i("download-viewer",{attrs:{path:e.oldPath,"project-path":e.projectPath}})],1)])])}),[],!1,null,null,null).exports,b=(i("va8A"),i("kO4A"),i("+kFb"),i("8Qi2"),i("zCcL"),i("zpLX"),i("BD5p"),i("Id6h"),i("yi8e")),S=i("dsWN"),I=i("MV2A"),P=i("FkSe"),M=i("30su"),O=i("/lV4"),x=i("pIt4"),C=i("0AwG");function L(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?L(Object(i),!0).forEach((function(t){j(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function j(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var E={STATE_LOADING:x.Q,STATE_ERRORED:x.O,TRANSITIONS:x.M,uiText:{showLink:Object(O.a)("Show file contents"),commitLink:Object(O.a)("View file @ %{commitSha}"),description:Object(O.a)("File renamed with no changes."),loadError:Object(O.a)("Unable to load file contents. Try again later.")},components:{GlAlert:S.a,GlLink:I.a,GlLoadingIcon:P.a,GlSprintf:M.a},props:{diffFile:{type:Object,required:!0}},data:function(){return{state:x.P}},computed:{shortSha:function(){return Object(C.r)(this.diffFile.content_sha)},canLoadFullDiff:function(){return"text"===this.diffFile.alternate_viewer.name}},methods:D(D({},Object(b.c)("diffs",["switchToFullDiffFromRenamedFile"])),{},{transition:function(e){var t="".concat(this.state,":").concat(e);this.$options.TRANSITIONS[t]&&(this.state=this.$options.TRANSITIONS[t])},is:function(e){return this.state===e},switchToFull:function(){var e=this;this.transition(x.U),this.switchToFullDiffFromRenamedFile({diffFile:this.diffFile}).then((function(){e.transition(x.V)})).catch((function(){e.transition(x.T)}))},clickLink:function(e){this.canLoadFullDiff&&(e.preventDefault(),this.switchToFull())},dismissError:function(){this.transition(x.S)}})},N=Object(r.a)(E,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"nothing-here-block"},[e.is(e.$options.STATE_LOADING)?i("gl-loading-icon"):[i("gl-alert",{directives:[{name:"show",rawName:"v-show",value:e.is(e.$options.STATE_ERRORED),expression:"is($options.STATE_ERRORED)"}],staticClass:"gl-mb-5 gl-text-left",attrs:{variant:"danger"},on:{dismiss:e.dismissError}},[e._v(e._s(e.$options.uiText.loadError))]),e._v(" "),i("span",{attrs:{"test-id":"plaintext"}},[e._v(e._s(e.$options.uiText.description))]),e._v(" "),i("gl-link",{attrs:{href:e.diffFile.view_path},on:{click:e.clickLink}},[e.canLoadFullDiff?i("span",[e._v(e._s(e.$options.uiText.showLink))]):i("gl-sprintf",{attrs:{message:e.$options.uiText.commitLink},scopedSlots:e._u([{key:"commitSha",fn:function(){return[e._v(e._s(e.shortSha))]},proxy:!0}])})],1)]],2)}),[],!1,null,null,null).exports,k={props:{aMode:{type:String,required:!1,default:null},bMode:{type:String,required:!1,default:null}},computed:{outputText:function(){return Object(O.e)(Object(O.a)("File mode changed from %{a_mode} to %{b_mode}"),{a_mode:this.aMode,b_mode:this.bMode})}}},z=Object(r.a)(k,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"nothing-here-block"},[this._v(this._s(this.outputText))])}),[],!1,null,null,null).exports,W={props:{diffFile:{type:Object,required:!0},diffMode:{type:String,required:!0},diffViewerMode:{type:String,required:!0},newPath:{type:String,required:!0},newSha:{type:String,required:!0},newSize:{type:Number,required:!1,default:0},oldPath:{type:String,required:!0},oldSha:{type:String,required:!0},oldSize:{type:Number,required:!1,default:0},projectPath:{type:String,required:!1,default:""},aMode:{type:String,required:!1,default:null},bMode:{type:String,required:!1,default:null}},computed:{viewer:function(){if(this.diffViewerMode===n.r.renamed)return N;if(this.diffMode===n.p.mode_changed)return z;if(!this.newPath)return null;switch(this.diffViewerMode){case n.r.image:return v;default:return y}},basePath:function(){return 0===this.projectPath.indexOf("/")?"":"".concat(gon.relative_url_root,"/")},fullOldPath:function(){return"".concat(this.basePath).concat(this.projectPath,"/-/raw/").concat(this.oldSha,"/").concat(this.oldPath)},fullNewPath:function(){return"".concat(this.basePath).concat(this.projectPath,"/-/raw/").concat(this.newSha,"/").concat(this.newPath)}}},q=Object(r.a)(W,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.viewer?i("div",{staticClass:"diff-file preview-container"},[i(e.viewer,{tag:"component",attrs:{"diff-file":e.diffFile,"diff-mode":e.diffMode,"new-path":e.fullNewPath,"old-path":e.fullOldPath,"old-size":e.oldSize,"new-size":e.newSize,"project-path":e.projectPath,"a-mode":e.aMode,"b-mode":e.bMode}},[e._t("image-overlay",null,{slot:"image-overlay"})],2),e._v(" "),e._t("default")],2):e._e()}),[],!1,null,null,null);t.a=q.exports}}]);
//# sourceMappingURL=commons~pages.ide~pages.projects.issues.designs~pages.projects.issues.show.d3f8cd39.chunk.js.map