(this.webpackJsonp=this.webpackJsonp||[]).push([[204],{"0DPl":function(t,e,n){"use strict";var o=n("3a3M"),i=n.n(o),s=n("Zvrg");e.a=function(t){Object(s.b)(document.querySelector(".js-diff-files-changed"),t),i()(".js-diff-stats-dropdown").glDropdown({filterable:!0,remoteFilter:!1})}},108:function(t,e,n){n("HVBj"),n("gjpc"),t.exports=n("Fn1g")},Bxe1:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o=n("3a3M"),i=n.n(o),s=n("XRO8"),r=n("2ibD"),a=n("/lV4");function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container||"",this.dropdownListSelector=".js-builds-dropdown-container",this.getBuildsList=this.getBuildsList.bind(this)}var e,n,o;return e=t,(n=[{key:"bindEvents",value:function(){i()(document).off("shown.bs.dropdown",this.container).on("shown.bs.dropdown",this.container,this.getBuildsList)}},{key:"stopDropdownClickPropagation",value:function(){i()(document).on("click","".concat(this.container," .js-builds-dropdown-list a.mini-pipeline-graph-dropdown-item"),(function(t){t.stopPropagation()}))}},{key:"renderBuildsList",value:function(t,e){t.parentElement.querySelector("".concat(this.dropdownListSelector," .js-builds-dropdown-list ul")).innerHTML=e}},{key:"getBuildsList",value:function(t){var e=this,n=t.relatedTarget,o=n.dataset.stageEndpoint;this.renderBuildsList(n,""),this.toggleLoading(n),r.a.get(o).then((function(t){var o=t.data;e.toggleLoading(n),e.renderBuildsList(n,o.html),e.stopDropdownClickPropagation()})).catch((function(){e.toggleLoading(n),i()(n).parent().hasClass("open")&&i()(n).dropdown("toggle"),Object(s.a)(Object(a.a)("An error occurred while fetching the builds."),"alert")}))}},{key:"toggleLoading",value:function(t){t.parentElement.querySelector("".concat(this.dropdownListSelector," .js-builds-dropdown-loading")).classList.toggle("hidden")}}])&&c(e.prototype,n),o&&c(e,o),t}()},CX32:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));n("va8A"),n("z4I3"),n("dj/k"),n("x/6R"),n("WQYg"),n("MRnW"),n("EfZm"),n("GzNv"),n("tbvx"),n("orcL");var o=n("t6Yz"),i=n.n(o),s=n("yQ8t");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=c(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=e.call(this),i.a.bind("g p",(function(){return Object(s.a)(".shortcuts-project")})),i.a.bind("g v",(function(){return Object(s.a)(".shortcuts-project-activity")})),i.a.bind("g r",(function(){return Object(s.a)(".shortcuts-project-releases")})),i.a.bind("g f",(function(){return Object(s.a)(".shortcuts-tree")})),i.a.bind("g c",(function(){return Object(s.a)(".shortcuts-commits")})),i.a.bind("g j",(function(){return Object(s.a)(".shortcuts-builds")})),i.a.bind("g n",(function(){return Object(s.a)(".shortcuts-network")})),i.a.bind("g d",(function(){return Object(s.a)(".shortcuts-repository-charts")})),i.a.bind("g i",(function(){return Object(s.a)(".shortcuts-issues")})),i.a.bind("g b",(function(){return Object(s.a)(".shortcuts-issue-boards")})),i.a.bind("g m",(function(){return Object(s.a)(".shortcuts-merge_requests")})),i.a.bind("g w",(function(){return Object(s.a)(".shortcuts-wiki")})),i.a.bind("g s",(function(){return Object(s.a)(".shortcuts-snippets")})),i.a.bind("g k",(function(){return Object(s.a)(".shortcuts-kubernetes")})),i.a.bind("g e",(function(){return Object(s.a)(".shortcuts-environments")})),i.a.bind("g l",(function(){return Object(s.a)(".shortcuts-metrics")})),i.a.bind("i",(function(){return Object(s.a)(".shortcuts-new-issue")})),t}return n}(n("v+Mp").a)},Fn1g:function(t,e,n){"use strict";n.r(e);var o=n("3a3M"),i=n.n(o),s=n("DN5t"),r=n("Ylta"),a=n("CX32"),c=n("Bxe1"),u=n("W0S0"),l=n("0DPl"),d=(n("kO4A"),n("jB52")),f=(n("BD5p"),n("bOix"));function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.notes={},this.loading=!1,this.canResolve=!1}var e,n,o;return e=t,(n=[{key:"createNote",value:function(t){d.default.set(this.notes,t.noteId,new NoteModel(this.id,t))}},{key:"deleteNote",value:function(t){d.default.delete(this.notes,t)}},{key:"getNote",value:function(t){return this.notes[t]}},{key:"notesCount",value:function(){return Object.keys(this.notes).length}},{key:"isResolved",value:function(){for(var t in this.notes)if(!this.notes[t].resolved)return!1;return!0}},{key:"resolveAllNotes",value:function(t){for(var e in this.notes){var n=this.notes[e];n.resolved||(n.resolved=!0,n.resolved_by=t)}}},{key:"unResolveAllNotes",value:function(){for(var t in this.notes){var e=this.notes[t];e.resolved&&(e.resolved=!1,e.resolved_by=null)}}},{key:"updateHeadline",value:function(t){var e='.discussion[data-discussion-id="'.concat(this.id,'"]'),n=i()("".concat(e," .js-discussion-headline"));t.discussion_headline_html?(n.length?n.replaceWith(t.discussion_headline_html):i()("".concat(e," .discussion-header")).append(t.discussion_headline_html),Object(f.m)(i()(".js-timeago","".concat(e)))):n.remove()}},{key:"isResolvable",value:function(){if(!this.canResolve)return!1;for(var t in this.notes)if(this.notes[t].canResolve)return!0;return!1}}])&&h(e.prototype,n),o&&h(e,o),t}();window.DiscussionModel=p;n("PTSS");window.CommentsStore={state:{},get:function(t,e){return this.state[t].getNote(e)},createDiscussion:function(t,e){var n=this.state[t];return this.state[t]||(n=new DiscussionModel(t),d.default.set(this.state,t,n)),void 0!==e&&(n.canResolve=e),n},create:function(t){this.createDiscussion(t.discussionId).createNote(t)},update:function(t,e,n,o){var i=this.state[t].getNote(e);i.resolved=n,i.resolved_by=o},delete:function(t,e){var n=this.state[t];n.deleteNote(e),0===n.notesCount()&&d.default.delete(this.state,t)},unresolvedDiscussionIds:function(){var t=[];for(var e in this.state){var n=this.state[e];n.isResolved()||t.push(n.id)}return t}};var v=n("XRO8"),m=n("/lV4");function g(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}window.gl=window.gl||{};var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.noteResource=d.default.resource("".concat(e,"/notes{/noteId}/resolve?html=true")),this.discussionResource=d.default.resource("".concat(e,"/merge_requests{/mergeRequestId}/discussions{/discussionId}/resolve?html=true"))}var e,n,o;return e=t,(n=[{key:"resolve",value:function(t){return this.noteResource.save({noteId:t},{})}},{key:"unresolve",value:function(t){return this.noteResource.delete({noteId:t},{})}},{key:"toggleResolveForDiscussion",value:function(t,e){var n=CommentsStore.state[e],o=n.isResolved();(o?this.unResolveAll(t,e):this.resolveAll(t,e)).then((function(t){return t.json()})).then((function(t){n.loading=!1;var e=t?t.resolved_by:null;o?n.unResolveAllNotes():n.resolveAllNotes(e),gl.mrWidget&&gl.mrWidget.checkStatus(),n.updateHeadline(t)})).catch((function(){return new v.a(Object(m.a)("An error occurred when trying to resolve a discussion. Please try again."))}))}},{key:"resolveAll",value:function(t,e){return CommentsStore.state[e].loading=!0,this.discussionResource.save({mergeRequestId:t,discussionId:e},{})}},{key:"unResolveAll",value:function(t,e){return CommentsStore.state[e].loading=!0,this.discussionResource.delete({mergeRequestId:t,discussionId:e},{})}}])&&g(e.prototype,n),o&&g(e,o),t}();gl.DiffNotesResolveServiceClass=b;var y={computed:{discussionCount:function(){return Object.keys(this.discussions).length},resolvedDiscussionCount:function(){var t=0;for(var e in this.discussions){this.discussions[e].isResolved()&&(t+=1)}return t},unresolvedDiscussionCount:function(){var t=0;for(var e in this.discussions){this.discussions[e].isResolved()||(t+=1)}return t}}},w=d.default.extend({props:{discussionId:{type:String,required:!0}},data:function(){return{textareaIsEmpty:!0,discussion:{}}},computed:{showButton:function(){return!!this.discussion&&this.discussion.isResolvable()},isDiscussionResolved:function(){return this.discussion.isResolved()},buttonText:function(){return this.textareaIsEmpty?this.isDiscussionResolved?Object(m.a)("Unresolve thread"):Object(m.a)("Resolve thread"):this.isDiscussionResolved?Object(m.a)("Comment & unresolve thread"):Object(m.a)("Comment & resolve thread")}},created:function(){this.discussionId&&(this.discussion=CommentsStore.state[this.discussionId])},mounted:function(){var t=this;if(this.discussionId){var e=i()(".js-discussion-note-form[data-discussion-id=".concat(this.discussionId,"] .note-textarea"));this.textareaIsEmpty=""===e.val(),e.on("input.comment-and-resolve-btn",(function(){t.textareaIsEmpty=""===e.val()}))}},destroyed:function(){this.discussionId&&i()(".js-discussion-note-form[data-discussion-id=".concat(this.discussionId,"] .note-textarea")).off("input.comment-and-resolve-btn")}});d.default.component("comment-and-resolve-btn",w);n("9U97"),n("t3Gg"),n("+kFb"),n("Z5ek"),n("Id6h");var j=d.default.extend({mixins:[y],props:{discussionId:{type:String,required:!0}},data:function(){return{discussions:CommentsStore.state,discussion:{}}},computed:{buttonText:function(){return this.discussionId?Object(m.a)("Jump to next unresolved thread"):Object(m.a)("Jump to first unresolved thread")},allResolved:function(){return 0===this.unresolvedDiscussionCount},showButton:function(){return this.discussionId?this.unresolvedDiscussionCount>1||this.discussionId!==this.lastResolvedId:this.unresolvedDiscussionCount>=1},lastResolvedId:function(){var t,e=this;return Object.keys(this.discussions).forEach((function(n){var o=e.discussions[n];o.isResolved()||(t=o.id)})),t}},created:function(){this.discussion=this.discussions[this.discussionId]},methods:{jumpToNextUnresolvedDiscussion:function(){var t,e,n,o,s=window.mrTabs.currentAction,r=!0,a=!this.discussionId,c=function(t){return t.map((function(){return i()(this).attr("data-discussion-id")})).toArray()},u=this.discussions;if("diffs"===s){t=".diffs .notes[data-discussion-id]",e=c(i()(t));for(var l=0,d=0;d<e.length;d+=1){var f=u[e[d]];f&&!f.isResolved()&&(l+=1)}this.discussionId&&!this.discussion.isResolved()?1===l&&(r=!1):0===l&&(r=!1)}else"show"!==s&&(r=!1);r||(window.mrTabs.activateTab("show"),s="show",a=!0),"show"===s&&(t=".discussion[data-discussion-id]",e=c(i()(t)));for(var h=!1,p=0;p<e.length;p+=1){var v=e[p],m=u[v];if(m){if(!n&&!m.isResolved()&&(n=v,a))break;if(!a){if(h){if(m.isResolved())continue;o=v;break}v===this.discussionId&&(h=!0)}}}if(o=o||n){var g=i()("".concat(t,'[data-discussion-id="').concat(o,'"]'));if("show"===s)(g=g.closest(".note-discussion")).find(".js-toggle-content").is(":hidden")&&g.find(".js-toggle-button i").trigger("click");else if("diffs"===s){g.closest(".content").show();var b,y=g.closest("tr.notes_holder");y.length>0&&(g=y),g.show();for(var w=0;w<4&&(b=g.prev()).hasClass("line_holder");w+=1)g=b}i.a.scrollTo(g,{offset:-150})}}}});d.default.component("jump-to-discussion",j);n("+xU6");var _=d.default.extend({props:{noteId:{type:Number,required:!0},discussionId:{type:String,required:!0},resolved:{type:Boolean,required:!0},canResolve:{type:Boolean,required:!0},resolvedBy:{type:String,required:!0},authorName:{type:String,required:!0},authorAvatar:{type:String,required:!0},noteTruncated:{type:String,required:!0}},data:function(){return{discussions:CommentsStore.state,loading:!1}},computed:{discussion:function(){return this.discussions[this.discussionId]},note:function(){return this.discussion?this.discussion.getNote(this.noteId):{}},buttonText:function(){return this.isResolved?Object(m.e)(Object(m.a)("Resolved by %{resolvedByName}"),{resolvedByName:this.resolvedByName}):this.canResolve?Object(m.a)("Mark as resolved"):Object(m.a)("Unable to resolve")},isResolved:function(){return!!this.note&&this.note.resolved},resolvedByName:function(){return this.note.resolved_by}},watch:{discussions:{handler:"updateTooltip",deep:!0}},mounted:function(){i()(this.$refs.button).tooltip({container:"body"})},beforeDestroy:function(){CommentsStore.delete(this.discussionId,this.noteId)},created:function(){CommentsStore.create({discussionId:this.discussionId,noteId:this.noteId,canResolve:this.canResolve,resolved:this.resolved,resolvedBy:this.resolvedBy,authorName:this.authorName,authorAvatar:this.authorAvatar,noteTruncated:this.noteTruncated})},methods:{updateTooltip:function(){var t=this;this.$nextTick((function(){i()(t.$refs.button).tooltip("hide").tooltip("_fixTitle")}))},resolve:function(){var t=this;this.canResolve&&(this.loading=!0,(this.isResolved?ResolveService.unresolve(this.noteId):ResolveService.resolve(this.noteId)).then((function(t){return t.json()})).then((function(e){t.loading=!1;var n=e?e.resolved_by:null;CommentsStore.update(t.discussionId,t.noteId,!t.isResolved,n),t.discussion.updateHeadline(e),gl.mrWidget.checkStatus(),t.updateTooltip()})).catch((function(){return new v.a(Object(m.a)("An error occurred when trying to resolve a comment. Please try again."))})))}}});d.default.component("resolve-btn",_),window.ResolveCount=d.default.extend({mixins:[y],props:{loggedOut:{type:Boolean,required:!0}},data:function(){return{discussions:CommentsStore.state}},computed:{allResolved:function(){return this.resolvedDiscussionCount===this.discussionCount},resolvedCountText:function(){return 1===this.discussionCount?"discussion":"discussions"}}});n("4ql4");var S=n("uqFy"),k=n("+kWK"),C=d.default.extend({components:{userAvatarImage:k.a},props:{discussionId:{type:String,required:!0}},data:function(){return{isVisible:!1,lineType:"",storeState:CommentsStore.state,shownAvatars:3,collapseIcon:'<svg width="11" height="11" viewBox="0 0 9 13"><path d="M2.57568253,6.49866948 C2.50548852,6.57199715 2.44637866,6.59708255 2.39835118,6.57392645 C2.3503237,6.55077034 2.32631032,6.48902165 2.32631032,6.38867852 L2.32631032,-2.13272614 C2.32631032,-2.23306927 2.3503237,-2.29481796 2.39835118,-2.31797406 C2.44637866,-2.34113017 2.50548852,-2.31604477 2.57568253,-2.24271709 L6.51022184,1.86747129 C6.53977721,1.8983461 6.56379059,1.93500939 6.5822627,1.97746225 L6.5822627,2.27849013 C6.56379059,2.31708364 6.53977721,2.35374693 6.51022184,2.38848109 L2.57568253,6.49866948 Z" transform="translate(4.454287, 2.127976) rotate(90.000000) translate(-4.454287, -2.127976) "></path><path d="M3.74312342,2.09553332 C3.74312342,1.99519019 3.77821989,1.9083561 3.8484139,1.83502843 C3.91860791,1.76170075 4.00173115,1.72503747 4.09778611,1.72503747 L4.80711151,1.72503747 C4.90316647,1.72503747 4.98628971,1.76170075 5.05648372,1.83502843 C5.12667773,1.9083561 5.16177421,1.99519019 5.16177421,2.09553332 L5.16177421,10.2464421 C5.16177421,10.3467853 5.12667773,10.4336194 5.05648372,10.506947 C4.98628971,10.5802747 4.90316647,10.616938 4.80711151,10.616938 L4.09778611,10.616938 C4.00173115,10.616938 3.91860791,10.5802747 3.8484139,10.506947 C3.77821989,10.4336194 3.74312342,10.3467853 3.74312342,10.2464421 L3.74312342,2.09553332 Z" transform="translate(4.452449, 6.170988) rotate(-90.000000) translate(-4.452449, -6.170988) "></path><path d="M2.57568253,14.6236695 C2.50548852,14.6969971 2.44637866,14.7220826 2.39835118,14.6989264 C2.3503237,14.6757703 2.32631032,14.6140216 2.32631032,14.5136785 L2.32631032,5.99227386 C2.32631032,5.89193073 2.3503237,5.83018204 2.39835118,5.80702594 C2.44637866,5.78386983 2.50548852,5.80895523 2.57568253,5.88228291 L6.51022184,9.99247129 C6.53977721,10.0233461 6.56379059,10.0600094 6.5822627,10.1024622 L6.5822627,10.4034901 C6.56379059,10.4420836 6.53977721,10.4787469 6.51022184,10.5134811 L2.57568253,14.6236695 Z" transform="translate(4.454287, 10.252976) scale(1, -1) rotate(90.000000) translate(-4.454287, -10.252976) "></path></svg>\n'}},computed:{discussionClassName:function(){return"js-diff-avatars-".concat(this.discussionId)},notesSubset:function(){var t=this,e=[];return this.discussion&&(e=Object.keys(this.discussion.notes).slice(0,this.shownAvatars).map((function(e){return t.discussion.notes[e]}))),e},extraNotesTitle:function(){if(this.discussion){var t=this.discussion.notesCount()-this.shownAvatars;return Object(m.c)("%d more comment","%d more comments",t)}return""},discussion:function(){return this.storeState[this.discussionId]},notesCount:function(){return this.discussion?this.discussion.notesCount():0},moreText:function(){var t=this.notesCount<100?"+":"";return"".concat(t).concat(this.notesCount-this.shownAvatars)}},watch:{storeState:{handler:function(){var t=this;this.$nextTick((function(){i()(".has-tooltip",t.$el).tooltip("_fixTitle"),t.addNoCommentClass()}))},deep:!0}},mounted:function(){var t=this;this.$nextTick((function(){t.addNoCommentClass(),t.setDiscussionVisible(),t.lineType=i()(t.$el).closest(".diff-line-num").hasClass("old_line")?"old":"new"})),i()(document).on("toggle.comments",(function(){t.$nextTick((function(){t.setDiscussionVisible()}))}))},beforeDestroy:function(){this.addNoCommentClass(),i()(document).off("toggle.comments")},methods:{clickedAvatar:function(t){var e=this;S.a.instance.onAddDiffNote(t),this.toggleDiscussionsToggleState(),this.$nextTick((function(){e.setDiscussionVisible(),i()(".has-tooltip",e.$el).tooltip("_fixTitle"),i()(".has-tooltip",e.$el).tooltip("hide")}))},addNoCommentClass:function(){var t=this.notesCount;i()(this.$el).closest(".js-avatar-container").toggleClass("no-comment-btn",t>0).nextUntil(".js-avatar-container").toggleClass("no-comment-btn",t>0)},toggleDiscussionsToggleState:function(){var t=i()(this.$el).closest(".code").find(".notes_holder"),e=t.filter(":visible");i()(this.$el).closest(".diff-file").find(".js-toggle-diff-comments").toggleClass("active",t.length===e.length)},setDiscussionVisible:function(){this.isVisible=i()('.diffs .notes[data-discussion-id="'.concat(this.discussion.id,'"]')).is(":visible")},getTooltipText:function(t){return"".concat(t.authorName,": ").concat(t.noteTruncated)}},template:'\n    <div class="diff-comment-avatar-holders"\n      :class="discussionClassName"\n      v-show="notesCount !== 0">\n      <div v-if="!isVisible">\n        \x3c!-- FIXME: Pass an alt attribute here for accessibility --\x3e\n        <user-avatar-image\n          v-for="note in notesSubset"\n          :key="note.id"\n          class="diff-comment-avatar js-diff-comment-avatar"\n          @click.native="clickedAvatar($event)"\n          :img-src="note.authorAvatar"\n          :tooltip-text="getTooltipText(note)"\n          :data-line-type="lineType"\n          :size="19"\n          data-html="true"\n        />\n        <span v-if="notesCount > shownAvatars"\n          class="diff-comments-more-count has-tooltip js-diff-comment-avatar"\n          data-container="body"\n          data-placement="top"\n          ref="extraComments"\n          role="button"\n          :data-line-type="lineType"\n          :title="extraNotesTitle"\n          @click="clickedAvatar($event)">{{ moreText }}</span>\n      </div>\n      <button class="diff-notes-collapse js-diff-comment-avatar"\n        type="button"\n        aria-label="Show comments"\n        :data-line-type="lineType"\n        @click="clickedAvatar($event)"\n        v-if="isVisible"\n        v-html="collapseIcon">\n      </button>\n    </div>\n  '});d.default.component("diff-note-avatars",C);var T=d.default.extend({props:{discussionId:{type:String,required:!0}},data:function(){return{discussions:CommentsStore.state}},computed:{discussion:function(){return this.discussions[this.discussionId]},showButton:function(){return!!this.discussion&&!this.discussion.isResolved()}}});d.default.component("new-issue-for-discussion-btn",T);var I=n("2ibD");function R(t,e){var n=function(t,e){return 0===t?"".concat(e," ").concat(Object(m.c)("merge request","merge requests",e)):","}(t,e);return i()("<span />",{class:"append-right-5",text:n})}function x(t){var e=i()("<span />"),n=function(t){return i()("<a />",{class:"append-right-5",href:t.path,text:"!".concat(t.iid)})}(t),o=function(t){return i()("<span />",{text:t.title})}(t);return e.append(n),e.append(o),e}function O(){var t=i()(".merge-requests");I.a.get(t.data("projectCommitPath")).then((function(e){var n=function(t){var e=i()("<span />");return 0===t.length?e.text(Object(m.d)("Commits|No related merge requests found")):t.forEach((function(n){var o=R(e.children().length,t.length),i=x(n);e.append(o),e.append(i)})),e}(e.data);t.html(n)})).catch((function(){return Flash(Object(m.d)("Commits|An error occurred while fetching merge requests data."))}))}n("ILhG");document.addEventListener("DOMContentLoaded",(function(){var t,e=document.querySelector(".with-performance-bar")?35:0;new s.a,new r.a,new a.a,new c.a({container:".js-commit-pipeline-graph"}).bindEvents(),Object(u.a)(),Object(l.a)(document.querySelector(".navbar-gitlab").offsetHeight+e),i()(".commit-info.branches").load(document.querySelector(".js-commit-box").dataset.commitPath),O(),t=(document.querySelector(".merge-request")||document.querySelector(".commit-box")).dataset.projectPath,window.gl=window.gl||{},window.gl.diffNoteApps={},window.ResolveService=new gl.DiffNotesResolveServiceClass(t),gl.diffNotesCompileComponents=function(){i()("diff-note-avatars").each((function(){var t=(new(d.default.extend({template:i()(this).get(0).outerHTML}))).$mount();i()(this).replaceWith(t.$el),i()(t.$el).one("remove.vue",(function(){t.$destroy(),t.$el.remove()}))}));var t=i()("resolve-btn, jump-to-discussion, comment-and-resolve-btn, new-issue-for-discussion-btn").filter((function(){return 1!==i()(this).closest("resolve-count").length}));t&&t.each((function(){var t=i()(this),e=t.attr(":note-id"),n=t.attr(":discussion-id");if(!t.is("comment-and-resolve-btn")||n){var o=(new(d.default.extend({template:t.get(0).outerHTML}))).$mount();e&&(gl.diffNoteApps["note_".concat(e)]=o),t.replaceWith(o.$el)}}))},gl.diffNotesCompileComponents(),i()(window).trigger("resize.nav")}))},ILhG:function(t,e,n){"use strict";var o=n("U5ZW");document.addEventListener("DOMContentLoaded",o.a)},PTSS:function(t,e){window.NoteModel=function t(e,n){"use strict";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.discussionId=e,this.id=n.noteId,this.canResolve=n.canResolve,this.resolved=n.resolved,this.resolved_by=n.resolvedBy,this.authorName=n.authorName,this.authorAvatar=n.authorAvatar,this.noteTruncated=n.noteTruncated}},U5ZW:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("x/6R"),n("MRnW"),n("tbvx"),n("orcL"),n("pETN");function o(){var t=(gon.sourcegraph||{}).url;if(t){var e,n,o=new URL("/assets/webpack/sourcegraph/",window.location.href),i=new URL("scripts/integration.bundle.js",o).href;window.SOURCEGRAPH_ASSETS_URL=o.href,window.SOURCEGRAPH_URL=t,window.SOURCEGRAPH_INTEGRATION="gitlab-integration",e=i,(n=document.createElement("script")).type="application/javascript",n.src=e,n.defer=!0,document.head.appendChild(n)}}},V2jy:function(t,e,n){!function(e,n){"use strict";var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i,s=!1,r=void 0!==e;r&&e.getComputedStyle?(i=n.createElement("div"),["","-webkit-","-moz-","-ms-"].some((function(t){try{i.style.position=t+"sticky"}catch(t){}return""!=i.style.position}))&&(s=!0)):s=!0;var a=!1,c="undefined"!=typeof ShadowRoot,u={top:null,left:null},l=[];function d(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function f(t){return parseFloat(t)||0}function h(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}var p=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(l.some((function(t){return t._node===e})))throw new Error("Stickyfill is already applied to this node");this._node=e,this._stickyMode=null,this._active=!1,l.push(this),this.refresh()}return o(t,[{key:"refresh",value:function(){if(!s&&!this._removed){this._active&&this._deactivate();var t=this._node,o=getComputedStyle(t),i={position:o.position,top:o.top,display:o.display,marginTop:o.marginTop,marginBottom:o.marginBottom,marginLeft:o.marginLeft,marginRight:o.marginRight,cssFloat:o.cssFloat};if(!isNaN(parseFloat(i.top))&&"table-cell"!=i.display&&"none"!=i.display){this._active=!0;var r=t.style.position;"sticky"!=o.position&&"-webkit-sticky"!=o.position||(t.style.position="static");var a=t.parentNode,u=c&&a instanceof ShadowRoot?a.host:a,l=t.getBoundingClientRect(),p=u.getBoundingClientRect(),v=getComputedStyle(u);this._parent={node:u,styles:{position:u.style.position},offsetHeight:u.offsetHeight},this._offsetToWindow={left:l.left,right:n.documentElement.clientWidth-l.right},this._offsetToParent={top:l.top-p.top-f(v.borderTopWidth),left:l.left-p.left-f(v.borderLeftWidth),right:-l.right+p.right-f(v.borderRightWidth)},this._styles={position:r,top:t.style.top,bottom:t.style.bottom,left:t.style.left,right:t.style.right,width:t.style.width,marginTop:t.style.marginTop,marginLeft:t.style.marginLeft,marginRight:t.style.marginRight};var m=f(i.top);this._limits={start:l.top+e.pageYOffset-m,end:p.top+e.pageYOffset+u.offsetHeight-f(v.borderBottomWidth)-t.offsetHeight-m-f(i.marginBottom)};var g=v.position;"absolute"!=g&&"relative"!=g&&(u.style.position="relative"),this._recalcPosition();var b=this._clone={};b.node=n.createElement("div"),d(b.node.style,{width:l.right-l.left+"px",height:l.bottom-l.top+"px",marginTop:i.marginTop,marginBottom:i.marginBottom,marginLeft:i.marginLeft,marginRight:i.marginRight,cssFloat:i.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),a.insertBefore(b.node,t),b.docOffsetTop=h(b.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var t=u.top<=this._limits.start?"start":u.top>=this._limits.end?"end":"middle";if(this._stickyMode!=t){switch(t){case"start":d(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":d(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":d(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=t}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(h(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var t=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,d(this._node.style,this._styles),delete this._styles,l.some((function(e){return e!==t&&e._parent&&e._parent.node===t._parent.node}))||d(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var t=this;this._deactivate(),l.some((function(e,n){if(e._node===t._node)return l.splice(n,1),!0})),this._removed=!0}}]),t}(),v={stickies:l,Sticky:p,forceSticky:function(){s=!1,m(),this.refreshAll()},addOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}for(var e=0;e<l.length;e++)if(l[e]._node===t)return l[e];return new p(t)},add:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length){for(var e=[],n=function(n){var o=t[n];return o instanceof HTMLElement?l.some((function(t){if(t._node===o)return e.push(t),!0}))?"continue":void e.push(new p(o)):(e.push(void 0),"continue")},o=0;o<t.length;o++)n(o);return e}},refreshAll:function(){l.forEach((function(t){return t.refresh()}))},removeOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}l.some((function(e){if(e._node===t)return e.remove(),!0}))},remove:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length)for(var e=function(e){var n=t[e];l.some((function(t){if(t._node===n)return t.remove(),!0}))},n=0;n<t.length;n++)e(n)},removeAll:function(){for(;l.length;)l[0].remove()}};function m(){if(!a){a=!0,s(),e.addEventListener("scroll",s),e.addEventListener("resize",v.refreshAll),e.addEventListener("orientationchange",v.refreshAll);var t=void 0,o=void 0,i=void 0;"hidden"in n?(o="hidden",i="visibilitychange"):"webkitHidden"in n&&(o="webkitHidden",i="webkitvisibilitychange"),i?(n[o]||r(),n.addEventListener(i,(function(){n[o]?clearInterval(t):r()}))):r()}function s(){e.pageXOffset!=u.left?(u.top=e.pageYOffset,u.left=e.pageXOffset,v.refreshAll()):e.pageYOffset!=u.top&&(u.top=e.pageYOffset,u.left=e.pageXOffset,l.forEach((function(t){return t._recalcPosition()})))}function r(){t=setInterval((function(){l.forEach((function(t){return t._fastCheck()}))}),500)}}s||m(),t.exports?t.exports=v:r&&(e.Stickyfill=v)}(window,document)},W0S0:function(t,e,n){"use strict";var o=n("uqFy");e.a=function(){var t=document.querySelector(".js-notes-data"),e=JSON.parse(t.innerHTML),n=e.notesUrl,i=e.notesIds,s=e.now,r=e.diffView,a=e.enableGFM;o.a.initialize(n,i,s,r,a)}},ZeWX:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));n("t3Gg"),n("+xeR");var o=n("3a3M"),i=n.n(o),s=n("06tH"),r=n.n(s),a=n("/lV4"),c=n("3twG");n("kO4A"),n("OZM5"),n("x/6R"),n("Z5ek"),n("yaFd"),n("8Qi2"),n("EWC9"),n("MRnW"),n("tbvx"),n("orcL");var u=function(t){return t.reduce((function(t,e){var n=e.name,o=e.value;return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,o))}),{})},l=n("2ibD"),d=n("XRO8"),f=n("k/Fq");function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=i()("ul.clone-options-dropdown"),n=i()("#project_clone"),o=i()(".js-git-clone-holder .js-clone-dropdown-label"),s=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),a=o.text().trim();a.length>0&&i()("a:contains('".concat(a,"')"),e).addClass("is-active"),i()("a",e).on("click",(function(t){t.preventDefault();var o=i()(t.currentTarget),r=o.attr("href"),a=o.data("cloneType");i()(".is-active",e).removeClass("is-active"),i()('a[data-clone-type="'.concat(a,'"]')).each((function(){var t=i()(this),e=t.find(".dropdown-menu-inner-title").text(),n=t.closest(".project-clone-holder").find(".js-clone-dropdown-label");t.toggleClass("is-active"),n.text(e)})),s?s.dataset.clipboardText=r:n.val(r),i()(".js-git-empty .js-clone").text(r)})),t.initRefSwitcher(),i()(".project-refs-select").on("change",(function(){return i()(this).parents("form").submit()})),i()(".hide-no-ssh-message").on("click",(function(t){return r.a.set("hide_no_ssh_message","false"),i()(this).parents(".no-ssh-key-message").remove(),t.preventDefault()})),i()(".hide-no-password-message").on("click",(function(t){return r.a.set("hide_no_password_message","false"),i()(this).parents(".no-password-message").remove(),t.preventDefault()})),i()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(t){var e=i()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(e);return r.a.set(n,"false"),i()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),t.preventDefault()})),t.projectSelectDropdown()}var e,n,o;return e=t,o=[{key:"projectSelectDropdown",value:function(){Object(f.a)(),i()(".project-item-select").on("click",(function(e){return t.changeProject(i()(e.currentTarget).val())}))}},{key:"changeProject",value:function(t){return window.location=t}},{key:"initRefSwitcher",value:function(){var t=document.createElement("li"),e=document.createElement("a");return e.href="#",i()(".js-project-refs-dropdown").each((function(){var n,o,s,r=i()(this),f=r.data("selected"),h=r.data("fieldName"),p=Boolean(r.data("visit")),v=r.closest("form"),m=v.attr("action"),g=Object(c.n)((n=v[0],o=new FormData(n),s=Array.from(o.keys()).map((function(t){var e=o.getAll(t);return{name:t,value:1===(e=e.filter((function(t){return t}))).length?e[0]:e}})),u(s)),m);return r.glDropdown({data:function(t,e){l.a.get(r.data("refsUrl"),{params:{ref:r.data("ref"),search:t}}).then((function(t){var n=t.data;return e(n)})).catch((function(){return Object(d.a)(Object(a.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:r.data("inputFieldName"),fieldName:h,renderRow:function(n){var o,i,s,r=t.cloneNode(!1),a=e.cloneNode(!1);return n===f&&(a.className="is-active"),a.textContent=n,a.dataset.ref=n,n.length>0&&p&&(a.href=Object(c.n)((s=n,(i=h)in(o={})?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o),g)),r.appendChild(a),r},id:function(t,e){return e.attr("data-ref")},toggleLabel:function(t,e){return e.text().trim()},clicked:function(t){var e=t.e;p||e.preventDefault()}})}))}}],(n=null)&&h(e.prototype,n),o&&h(e,o),t}()},Zvrg:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));var o=n("V2jy"),i=n.n(o),s=function(t,e,n,o){var i=Math.floor(t.offsetTop-e);if(i<=n&&!t.classList.contains("is-stuck")){var s=o?function(){var t=document.createElement("div");return t.classList.add("sticky-placeholder"),t}():null,r=t.offsetHeight;t.classList.add("is-stuck"),o&&(t.parentNode.insertBefore(s,t.nextElementSibling),s.style.height="".concat(r-t.offsetHeight,"px"))}else i>n&&t.classList.contains("is-stuck")&&(t.classList.remove("is-stuck"),o&&t.nextElementSibling&&t.nextElementSibling.classList.contains("sticky-placeholder")&&t.nextElementSibling.remove())},r=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&"undefined"!=typeof CSS&&CSS.supports("(position: -webkit-sticky) or (position: sticky)")&&document.addEventListener("scroll",(function(){return s(t,window.scrollY,e,n)}),{passive:!0})},a=function(t){i.a.add(t)}},gjpc:function(t,e,n){"use strict";n.r(e);var o=n("ZeWX"),i=n("CX32");document.addEventListener("DOMContentLoaded",(function(){new o.a,new i.a}))},"k/Fq":function(t,e,n){"use strict";n("9U97"),n("8Qi2"),n("MRnW"),n("jaBk");var o=n("3a3M"),i=n.n(o),s=n("qPgm"),r=(n("gyUR"),n("4ql4"),n("IdsT"),n("pBsb"),n("n7CP"));function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectSelectInput=i()(e),this.newItemBtn=i()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var e,o,s;return e=t,(o=[{key:"bindEvents",value:function(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(e){return t.openDropdown(e)})),this.newItemBtn.on("click",(function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))})),this.projectSelectInput.on("change",(function(){return t.selectProject()}))}},{key:"initLocalStorage",value:function(){r.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(t){n.e(311).then(n.t.bind(null,"p9g0",7)).then((function(){i()(t.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}},{key:"setBtnTextFromLocalStorage",value:function(){var t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}},{key:"setNewItemBtnAttributes",value:function(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}},{key:"setProjectInLocalStorage",value:function(t){var e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}},{key:"deriveTextVariants",value:function(){var t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&a(e.prototype,o),s&&a(e,s),t}(),u=n("/lV4"),l=function(){i()(".ajax-project-select").each((function(t,e){var n,o=this,r=i()(e).data("simpleFilter")||!1,a=i()(e).data("select2");return this.groupId=i()(e).data("groupId"),this.userId=i()(e).data("userId"),this.includeGroups=i()(e).data("includeGroups"),this.allProjects=i()(e).data("allProjects")||!1,this.orderBy=i()(e).data("orderBy")||"id",this.withIssuesEnabled=i()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=i()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===i()(e).data("withShared")||i()(e).data("withShared"),this.includeProjectsInSubgroups=i()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=i()(e).data("allowClear")||!1,n=Object(u.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(u.d)("ProjectSelect| or group")),i()(e).select2({placeholder:n,minimumInputLength:0,query:function(t){var e,n=function(e){var n={results:e};return t.callback(n)};return e=o.includeGroups?function(e){return s.a.groups(t.term,{},(function(t){var o=t.concat(e);return n(o)}))}:n,o.groupId?s.a.groupProjects(o.groupId,t.term,{search_namespaces:!0,with_issues_enabled:o.withIssuesEnabled,with_merge_requests_enabled:o.withMergeRequestsEnabled,with_shared:o.withShared,include_subgroups:o.includeProjectsInSubgroups},e):o.userId?s.a.userProjects(o.userId,t.term,{with_issues_enabled:o.withIssuesEnabled,with_merge_requests_enabled:o.withMergeRequestsEnabled,with_shared:o.withShared,include_subgroups:o.includeProjectsInSubgroups},e):s.a.projects(t.term,{order_by:o.orderBy,with_issues_enabled:o.withIssuesEnabled,with_merge_requests_enabled:o.withMergeRequestsEnabled,membership:!o.allProjects},e)},id:function(t){return r?t.id:JSON.stringify({name:t.name,url:t.web_url})},text:function(t){return t.name_with_namespace||t.name},initSelection:function(t,e){return s.a.project(t.val()).then((function(t){var n=t.data;return e(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),a||r?e:new c(e)}))};e.a=function(){return n.e(311).then(n.t.bind(null,"p9g0",7)).then(l).catch((function(){}))}},o4PY:function(t,e,n){var o=n("rhmX"),i=0;t.exports=function(t){var e=++i;return o(t)+e}}},[[108,1,0,2,5,9,31,35]]]);
//# sourceMappingURL=pages.projects.commit.show.68754168.chunk.js.map