(this.webpackJsonp=this.webpackJsonp||[]).push([[157],{62:function(e,t,a){a("HVBj"),e.exports=a("CCMp")},CCMp:function(e,t,a){"use strict";a.r(t);var n=a("r5uf"),i=a("bplN");document.addEventListener("DOMContentLoaded",(function(){Object(n.a)(),new i.a}))},bplN:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a("9U97"),a("t3Gg"),a("Z5ek"),a("MRnW"),a("IdsT"),a("GzNv"),a("pBsb");var n=a("3a3M"),i=a.n(n),s=a("+XPY"),o=a.n(s),d=a("a+C/"),l=a.n(d),r=a("/lV4"),c=a("2ibD"),u=a("bOix"),h=a("KQYO");function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,a){return t&&f(e.prototype,t),a&&f(e,a),e}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.$dropdown,n=t.$loading;p(this,e);var s=a.closest(".dropdown"),o=a.closest(".block");this.$loading=n,this.$dropdown=a,this.$dropdownParent=s,this.$datePicker=s.find(".js-due-date-calendar"),this.$block=o,this.$sidebarCollapsedValue=o.find(".sidebar-collapsed-icon"),this.$selectbox=a.closest(".selectbox"),this.$value=o.find(".value"),this.$valueContent=o.find(".value-content"),this.$sidebarValue=i()(".js-due-date-sidebar-value",o),this.fieldName=a.data("fieldName"),this.abilityName=a.data("abilityName"),this.issueUpdateURL=a.data("issueUpdate"),this.rawSelectedDate=null,this.displayedDate=null,this.datePayload=null,this.initGlDropdown(),this.initRemoveDueDate(),this.initDatePicker()}return g(e,[{key:"initGlDropdown",value:function(){var e=this;this.$dropdown.glDropdown({opened:function(){e.$datePicker.data("pikaday").show()},hidden:function(){e.$selectbox.hide(),e.$value.css("display","")},shouldPropagate:!1})}},{key:"initDatePicker",value:function(){var e=this,t=i()("input[name='".concat(this.fieldName,"']")),a=new o.a({field:t.get(0),theme:"gitlab-theme",format:"yyyy-mm-dd",parse:function(e){return Object(u.o)(e)},toString:function(e){return Object(u.q)(e)},onSelect:function(n){t.val(a.toString(n)),e.$dropdown.hasClass("js-issue-boards-due-date")?(h.c.detail.issue.dueDate=t.val(),e.updateIssueBoardIssue()):e.saveDueDate(!0)},firstDay:gon.first_day_of_week});a.setDate(Object(u.o)(t.val())),this.$datePicker.append(a.el),this.$datePicker.data("pikaday",a)}},{key:"initRemoveDueDate",value:function(){var e=this;this.$block.on("click",".js-remove-due-date",(function(t){var a=e.$datePicker.data("pikaday");t.preventDefault(),a.setDate(null),e.$dropdown.hasClass("js-issue-boards-due-date")?(h.c.detail.issue.dueDate="",e.updateIssueBoardIssue()):(i()("input[name='".concat(e.fieldName,"']")).val(""),e.saveDueDate(!1))}))}},{key:"saveDueDate",value:function(e){this.parseSelectedDate(),this.prepSelectedDate(),this.submitSelectedDate(e)}},{key:"parseSelectedDate",value:function(){if(this.rawSelectedDate=i()("input[name='".concat(this.fieldName,"']")).val(),this.rawSelectedDate.length){var e=this.rawSelectedDate.split("-").map((function(e){return parseInt(e,10)})),t=new Date(e[0],e[1]-1,e[2]);this.displayedDate=l()(t,"mmm d, yyyy")}else this.displayedDate=Object(r.a)("None")}},{key:"prepSelectedDate",value:function(){var e={};e[this.abilityName]={},e[this.abilityName].due_date=this.rawSelectedDate,this.datePayload=e}},{key:"updateIssueBoardIssue",value:function(){var e=this;this.$loading.fadeIn(),this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide(),this.$value.css("display","");var t=function(){e.$loading.fadeOut()};h.c.detail.issue.update(this.$dropdown.attr("data-issue-update")).then(t).catch(t)}},{key:"submitSelectedDate",value:function(e){var t=this,a=this.datePayload[this.abilityName].due_date,n=this.displayedDate!==Object(r.a)("None"),s=n?"bold":"no-value";return this.$loading.removeClass("hidden").fadeIn(),e&&(this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide()),this.$value.css("display",""),this.$valueContent.html("<span class='".concat(s,"'>").concat(this.displayedDate,"</span>")),this.$sidebarValue.html(this.displayedDate),i()(".js-remove-due-date-holder").toggleClass("hidden",a.length),c.a.put(this.issueUpdateURL,this.datePayload).then((function(){var i=n?"".concat(Object(r.a)("Due date"),"<br />").concat(a," (").concat(Object(u.t)(a),")"):Object(r.a)("Due date");return e&&(t.$dropdown.trigger("loaded.gl.dropdown"),t.$dropdown.dropdown("toggle")),t.$sidebarCollapsedValue.attr("data-original-title",i),t.$loading.fadeOut()}))}}]),e}(),b=function(){function e(){p(this,e),this.initMilestoneDatePicker(),this.initIssuableSelect()}return g(e,[{key:"initMilestoneDatePicker",value:function(){i()(".datepicker").each((function(){var e=i()(this),t=e.val(),a=new o.a({field:e.get(0),theme:"gitlab-theme animate-picker",format:"yyyy-mm-dd",container:e.parent().get(0),parse:function(e){return Object(u.o)(e)},toString:function(e){return Object(u.q)(e)},onSelect:function(t){e.val(a.toString(t))},firstDay:gon.first_day_of_week});a.setDate(Object(u.o)(t)),e.data("pikaday",a)})),i()(".js-clear-due-date,.js-clear-start-date").on("click",(function(e){e.preventDefault(),i()(e.target).siblings(".datepicker").data("pikaday").setDate(null)}))}},{key:"initIssuableSelect",value:function(){var e=i()(".js-issuable-update .due_date").find(".block-loading").hide();i()(".js-due-date-select").each((function(t,a){var n=i()(a);new v({$dropdown:n,$loading:e})}))}}]),e}()},r5uf:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("t3Gg");var n=a("3a3M"),i=a.n(n),s=a("/lV4");function o(e){e.find(".js-settings-toggle:not(.js-settings-toggle-trigger-only)").text(Object(s.a)("Collapse")),e.find(".settings-content").off("scroll.expandSection").scrollTop(0),e.addClass("expanded"),e.hasClass("no-animate")||e.addClass("animating").one("animationend.animateSection",(function(){return e.removeClass("animating")}))}function d(e){e.removeClass("no-animate"),e.hasClass("expanded")?function(e){e.find(".js-settings-toggle:not(.js-settings-toggle-trigger-only)").text(Object(s.a)("Expand")),e.find(".settings-content").on("scroll.expandSection",(function(){return o(e)})),e.removeClass("expanded"),e.hasClass("no-animate")||e.addClass("animating").one("animationend.animateSection",(function(){return e.removeClass("animating")}))}(e):o(e)}function l(){if(i()(".settings").each((function(e,t){var a=i()(t);a.on("click.toggleSection",".js-settings-toggle",(function(){return d(a)})),a.hasClass("expanded")||a.find(".settings-content").on("scroll.expandSection",(function(){a.removeClass("no-animate"),o(a)}))})),window.location.hash){var e=i()(window.location.hash);e.length&&e.hasClass("settings")&&o(e)}}}},[[62,1,0,6,7]]]);
//# sourceMappingURL=pages.groups.settings.repository.show.12ed2559.chunk.js.map