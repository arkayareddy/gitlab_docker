(this.webpackJsonp=this.webpackJsonp||[]).push([[270],{175:function(t,e,n){n("HVBj"),n("gjpc"),t.exports=n("6xiW")},"4ips":function(t,e,n){var r=n("1qE/"),i=n("MlCX");t.exports=function t(e,n,o,a,s){var c=-1,u=e.length;for(o||(o=i),s||(s=[]);++c<u;){var l=e[c];n>0&&o(l)?n>1?t(l,n-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}},"6xiW":function(t,e,n){"use strict";n.r(e);var r=n("Bl6y"),i=(n("va8A"),n("z4I3"),n("dj/k"),n("9U97"),n("kO4A"),n("t3Gg"),n("+kFb"),n("OZM5"),n("FMw2"),n("x/6R"),n("Z5ek"),n("4ql4"),n("8Qi2"),n("zCcL"),n("zpLX"),n("WQYg"),n("BD5p"),n("MRnW"),n("jaBk"),n("EfZm"),n("arjl"),n("GzNv"),n("QifN"),n("tbvx"),n("Id6h"),n("orcL"),n("TKCn")),o=n.n(i),a=n("G3fq"),s=n.n(a),c=n("3a3M"),u=n.n(c),l=n("jF6B"),d=n("VQ4T"),f=n("2ibD"),h=n("/lV4"),p=n("0AwG");function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e,n){return(M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S(t);if(e){var i=S(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function P(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(a,t);var e,n,r,i=O(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).customMetrics=[],e.environmentsData=[],e.$els=[],e.$wrapperCustomMetrics=u()(t),e.$monitoredCustomMetricsPanel=e.$wrapperCustomMetrics.find(".js-panel-custom-monitored-metrics"),e.$monitoredCustomMetricsCount=e.$monitoredCustomMetricsPanel.find(".js-custom-monitored-count"),e.$monitoredCustomMetricsLoading=e.$monitoredCustomMetricsPanel.find(".js-loading-custom-metrics"),e.$monitoredCustomMetricsEmpty=e.$monitoredCustomMetricsPanel.find(".js-empty-custom-metrics"),e.$monitoredCustomMetricsList=e.$monitoredCustomMetricsPanel.find(".js-custom-metrics-list"),e.$monitoredCustomMetricsNoIntegrationText=e.$monitoredCustomMetricsPanel.find(".js-no-active-integration-text"),e.$newCustomMetricButton=e.$monitoredCustomMetricsPanel.find(".js-new-metric-button"),e.$newCustomMetricText=e.$monitoredCustomMetricsPanel.find(".js-new-metric-text"),e.$flashCustomMetricsContainer=e.$wrapperCustomMetrics.find(".flash-container"),e.$els=[e.$monitoredCustomMetricsLoading,e.$monitoredCustomMetricsList,e.$newCustomMetricButton,e.$newCustomMetricText,e.$monitoredCustomMetricsNoIntegrationText,e.$monitoredCustomMetricsEmpty],e.activeCustomMetricsEndpoint=e.$monitoredCustomMetricsPanel.data("active-custom-metrics"),e.environmentsDataEndpoint=e.$monitoredCustomMetricsPanel.data("environments-data-endpoint"),e.isServiceActive=e.$monitoredCustomMetricsPanel.data("service-active"),e}return e=a,r=[{key:"customMetricTemplate",value:function(t){return'\n    <li class="custom-metric">\n      <a href="'.concat(s()(t.edit_path),'" class="custom-metric-link-bold">\n        ').concat(s()(t.group)," / ").concat(s()(t.title)," (").concat(s()(t.unit),")\n      </a>\n    </li>\n  ")}}],(n=[{key:"init",value:function(){this.isServiceActive?this.loadActiveCustomMetrics():this.setNoIntegrationActiveState()}},{key:"setHidden",value:function(t){t.forEach((function(t){return t.addClass("hidden")}))}},{key:"setVisible",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.setHidden(this.$els.filter((function(t){return!e.includes(t)}))),e.forEach((function(t){return t.removeClass("hidden")}))}},{key:"showMonitoringCustomMetricsPanelState",value:function(t){switch(t){case d.a.LOADING:this.setVisible(this.$monitoredCustomMetricsLoading);break;case d.a.LIST:this.setVisible(this.$newCustomMetricButton,this.$monitoredCustomMetricsList);break;case d.a.NO_INTEGRATION:this.setVisible(this.$monitoredCustomMetricsNoIntegrationText,this.$monitoredCustomMetricsEmpty);break;default:this.setVisible(this.$monitoredCustomMetricsEmpty,this.$newCustomMetricButton,this.$newCustomMetricText)}}},{key:"populateCustomMetrics",value:function(){var t=this;o()(this.customMetrics.map((function(t){return y(y({},t),{},{group:Object(p.b)(t.group)})})),["group","title"]).forEach((function(e){t.$monitoredCustomMetricsList.append(a.customMetricTemplate(e))})),this.$monitoredCustomMetricsCount.text(this.customMetrics.length),this.showMonitoringCustomMetricsPanelState(d.a.LIST),this.environmentsData||this.showFlashMessage(Object(h.d)("PrometheusService|These metrics will only be monitored after your first deployment to an environment"))}},{key:"showFlashMessage",value:function(t){this.$flashCustomMetricsContainer.removeClass("hidden"),this.$flashCustomMetricsContainer.find(".flash-text").text(t)}},{key:"setNoIntegrationActiveState",value:function(){this.showMonitoringCustomMetricsPanelState(d.a.NO_INTEGRATION),this.showMonitoringMetricsPanelState(d.a.EMPTY)}},{key:"loadActiveCustomMetrics",value:function(){var t=this;M(S(a.prototype),"loadActiveMetrics",this).call(this),Promise.all([f.a.get(this.activeCustomMetricsEndpoint),f.a.get(this.environmentsDataEndpoint)]).then((function(e){var n=v(e,2),r=n[0],i=n[1];t.environmentsData=i.data.environments,r.data&&r.data.metrics?(t.customMetrics=r.data.metrics,t.populateCustomMetrics(r.data.metrics)):t.showMonitoringCustomMetricsPanelState(d.a.EMPTY)})).catch((function(e){t.showFlashMessage(e),t.showMonitoringCustomMetricsPanelState(d.a.EMPTY)}))}}])&&w(e.prototype,n),r&&w(e,r),a}(l.a),k=n("jB52"),$=n("GTGS"),x=n("l5WF"),E=n("PrLL"),T=n("1cpz"),I=n("XqDB"),L=n("rK/1"),R=n("XRO8"),A={copyToClipboard:Object(h.a)("Copy"),components:{GlDeprecatedButton:$.a,GlFormGroup:x.a,GlFormInput:E.a,GlModal:T.a,ClipboardButton:L.a},directives:{"gl-modal":I.a},props:{initialAuthorizationKey:{type:String,required:!1,default:""},changeKeyUrl:{type:String,required:!0},notifyUrl:{type:String,required:!0},learnMoreUrl:{type:String,required:!0}},data:function(){return{authorizationKey:this.initialAuthorizationKey,sectionDescription:Object(h.e)(Object(h.a)("To receive alerts from manually configured Prometheus services, add the following URL and Authorization key to your Prometheus webhook config file. Learn more about %{linkStart}configuring Prometheus%{linkEnd} to send alerts to GitLab."),{linkStart:'<a href="'.concat(this.learnMoreUrl,'" target="_blank" rel="noopener noreferrer">'),linkEnd:"</a>"},!1)}},methods:{resetKey:function(){var t=this;f.a.post(this.changeKeyUrl).then((function(e){t.authorizationKey=e.data.token})).catch((function(){Object(R.a)(Object(h.a)("Failed to reset key. Please try again."))}))}}},D=n("tBpV"),N=Object(D.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row py-4 border-top js-prometheus-alerts"},[n("div",{staticClass:"col-lg-3"},[n("h4",{staticClass:"mt-0"},[t._v("\n      "+t._s(t.__("Alerts"))+"\n    ")]),t._v(" "),n("p",[t._v("\n      "+t._s(t.__("Receive alerts from manually configured Prometheus servers."))+"\n    ")])]),t._v(" "),n("div",{staticClass:"col-lg-9"},[n("p",{domProps:{innerHTML:t._s(t.sectionDescription)}}),t._v(" "),n("gl-form-group",{attrs:{label:t.__("URL"),"label-for":"notify-url","label-class":"label-bold"}},[n("div",{staticClass:"input-group"},[n("gl-form-input",{attrs:{id:"notify-url",readonly:!0,value:t.notifyUrl}}),t._v(" "),n("span",{staticClass:"input-group-append"},[n("clipboard-button",{attrs:{text:t.notifyUrl,title:t.$options.copyToClipboard}})],1)],1)]),t._v(" "),n("gl-form-group",{attrs:{label:t.__("Authorization key"),"label-for":"authorization-key","label-class":"label-bold"}},[n("div",{staticClass:"input-group"},[n("gl-form-input",{attrs:{id:"authorization-key",readonly:!0,value:t.authorizationKey}}),t._v(" "),n("span",{staticClass:"input-group-append"},[n("clipboard-button",{attrs:{text:t.authorizationKey,title:t.$options.copyToClipboard}})],1)],1)]),t._v(" "),t.authorizationKey.length>0?[n("gl-modal",{attrs:{"modal-id":"authKeyModal",title:t.__("Reset authorization key?"),"ok-title":t.__("Reset authorization key"),"ok-variant":"danger"},on:{ok:t.resetKey}},[t._v("\n        "+t._s(t.__("Resetting the authorization key will invalidate the previous key. Existing alert configurations will need to be updated with the new key."))+"\n      ")]),t._v(" "),n("gl-deprecated-button",{directives:[{name:"gl-modal",rawName:"v-gl-modal.authKeyModal",modifiers:{authKeyModal:!0}}],staticClass:"js-reset-auth-key"},[t._v(t._s(t.__("Reset key")))])]:n("gl-deprecated-button",{staticClass:"js-reset-auth-key",on:{click:t.resetKey}},[t._v(t._s(t.__("Generate key")))])],2)])}),[],!1,null,null,null).exports,B=n("8MWd");document.addEventListener("DOMContentLoaded",(function(){new r.a(".js-integration-settings-form").init();document.querySelector(".js-prometheus-metrics-monitoring")&&new _(".js-prometheus-metrics-monitoring").init();!function(){var t=document.querySelector("#js-settings-prometheus-alerts");if(t){var e=t.dataset,n=e.authorizationKey,r=e.changeKeyUrl,i=e.notifyUrl,o=e.learnMoreUrl;new k.default({el:t,render:function(t){return t(N,{props:{initialAuthorizationKey:n,changeKeyUrl:r,notifyUrl:i,learnMoreUrl:o}})}})}}(),Object(B.a)(document.querySelector(".js-alerts-service-settings"))}))},"7Gq8":function(t,e,n){var r=n("BZxG");t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,c=n.length;++i<s;){var u=r(o[i],a[i]);if(u)return i>=c?u:u*("desc"==n[i]?-1:1)}return t.index-e.index}},"95R8":function(t,e,n){var r=n("90g9"),i=n("nHTl"),o=n("QwWC"),a=n("uHqx"),s=n("wJPF"),c=n("7Gq8"),u=n("uYOL");t.exports=function(t,e,n){var l=-1;e=r(e.length?e:[u],s(i));var d=o(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++l,value:t}}));return a(d,(function(t,e){return c(t,e,n)}))}},BZxG:function(t,e,n){var r=n("G1mR");t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,a=r(t),s=void 0!==e,c=null===e,u=e==e,l=r(e);if(!c&&!l&&!a&&t>e||a&&s&&u&&!c&&!l||i&&s&&u||!n&&u||!o)return 1;if(!i&&!a&&!l&&t<e||l&&n&&o&&!i&&!a||c&&n&&o||!s&&o||!u)return-1}return 0}},CX32:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));n("va8A"),n("z4I3"),n("dj/k"),n("x/6R"),n("WQYg"),n("MRnW"),n("EfZm"),n("GzNv"),n("tbvx"),n("orcL");var r=n("t6Yz"),i=n.n(r),o=n("yQ8t");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,t);var e=c(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=e.call(this),i.a.bind("g p",(function(){return Object(o.a)(".shortcuts-project")})),i.a.bind("g v",(function(){return Object(o.a)(".shortcuts-project-activity")})),i.a.bind("g r",(function(){return Object(o.a)(".shortcuts-project-releases")})),i.a.bind("g f",(function(){return Object(o.a)(".shortcuts-tree")})),i.a.bind("g c",(function(){return Object(o.a)(".shortcuts-commits")})),i.a.bind("g j",(function(){return Object(o.a)(".shortcuts-builds")})),i.a.bind("g n",(function(){return Object(o.a)(".shortcuts-network")})),i.a.bind("g d",(function(){return Object(o.a)(".shortcuts-repository-charts")})),i.a.bind("g i",(function(){return Object(o.a)(".shortcuts-issues")})),i.a.bind("g b",(function(){return Object(o.a)(".shortcuts-issue-boards")})),i.a.bind("g m",(function(){return Object(o.a)(".shortcuts-merge_requests")})),i.a.bind("g w",(function(){return Object(o.a)(".shortcuts-wiki")})),i.a.bind("g s",(function(){return Object(o.a)(".shortcuts-snippets")})),i.a.bind("g k",(function(){return Object(o.a)(".shortcuts-kubernetes")})),i.a.bind("g e",(function(){return Object(o.a)(".shortcuts-environments")})),i.a.bind("g l",(function(){return Object(o.a)(".shortcuts-metrics")})),i.a.bind("i",(function(){return Object(o.a)(".shortcuts-new-issue")})),t}return n}(n("v+Mp").a)},MlCX:function(t,e,n){var r=n("aCzx"),i=n("x14d"),o=n("P/Kr"),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},QwWC:function(t,e,n){var r=n("2v8U"),i=n("20jF");t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},TKCn:function(t,e,n){var r=n("4ips"),i=n("95R8"),o=n("Opi0"),a=n("etTJ"),s=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=s},VQ4T:function(t,e,n){"use strict";e.a={EMPTY:"empty",LOADING:"loading",LIST:"list",NO_INTEGRATION:"no-integration"}},ZeWX:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));n("t3Gg"),n("+xeR");var r=n("3a3M"),i=n.n(r),o=n("06tH"),a=n.n(o),s=n("/lV4"),c=n("3twG");n("kO4A"),n("OZM5"),n("x/6R"),n("Z5ek"),n("yaFd"),n("8Qi2"),n("EWC9"),n("MRnW"),n("tbvx"),n("orcL");var u=function(t){return t.reduce((function(t,e){var n=e.name,r=e.value;return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,r))}),{})},l=n("2ibD"),d=n("XRO8"),f=n("k/Fq");function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=i()("ul.clone-options-dropdown"),n=i()("#project_clone"),r=i()(".js-git-clone-holder .js-clone-dropdown-label"),o=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),s=r.text().trim();s.length>0&&i()("a:contains('".concat(s,"')"),e).addClass("is-active"),i()("a",e).on("click",(function(t){t.preventDefault();var r=i()(t.currentTarget),a=r.attr("href"),s=r.data("cloneType");i()(".is-active",e).removeClass("is-active"),i()('a[data-clone-type="'.concat(s,'"]')).each((function(){var t=i()(this),e=t.find(".dropdown-menu-inner-title").text(),n=t.closest(".project-clone-holder").find(".js-clone-dropdown-label");t.toggleClass("is-active"),n.text(e)})),o?o.dataset.clipboardText=a:n.val(a),i()(".js-git-empty .js-clone").text(a)})),t.initRefSwitcher(),i()(".project-refs-select").on("change",(function(){return i()(this).parents("form").submit()})),i()(".hide-no-ssh-message").on("click",(function(t){return a.a.set("hide_no_ssh_message","false"),i()(this).parents(".no-ssh-key-message").remove(),t.preventDefault()})),i()(".hide-no-password-message").on("click",(function(t){return a.a.set("hide_no_password_message","false"),i()(this).parents(".no-password-message").remove(),t.preventDefault()})),i()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(t){var e=i()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(e);return a.a.set(n,"false"),i()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),t.preventDefault()})),t.projectSelectDropdown()}var e,n,r;return e=t,r=[{key:"projectSelectDropdown",value:function(){Object(f.a)(),i()(".project-item-select").on("click",(function(e){return t.changeProject(i()(e.currentTarget).val())}))}},{key:"changeProject",value:function(t){return window.location=t}},{key:"initRefSwitcher",value:function(){var t=document.createElement("li"),e=document.createElement("a");return e.href="#",i()(".js-project-refs-dropdown").each((function(){var n,r,o,a=i()(this),f=a.data("selected"),h=a.data("fieldName"),p=Boolean(a.data("visit")),m=a.closest("form"),v=m.attr("action"),g=Object(c.n)((n=m[0],r=new FormData(n),o=Array.from(r.keys()).map((function(t){var e=r.getAll(t);return{name:t,value:1===(e=e.filter((function(t){return t}))).length?e[0]:e}})),u(o)),v);return a.glDropdown({data:function(t,e){l.a.get(a.data("refsUrl"),{params:{ref:a.data("ref"),search:t}}).then((function(t){var n=t.data;return e(n)})).catch((function(){return Object(d.a)(Object(s.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:a.data("inputFieldName"),fieldName:h,renderRow:function(n){var r,i,o,a=t.cloneNode(!1),s=e.cloneNode(!1);return n===f&&(s.className="is-active"),s.textContent=n,s.dataset.ref=n,n.length>0&&p&&(s.href=Object(c.n)((o=n,(i=h)in(r={})?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r),g)),a.appendChild(s),a},id:function(t,e){return e.attr("data-ref")},toggleLabel:function(t,e){return e.text().trim()},clicked:function(t){var e=t.e;p||e.preventDefault()}})}))}}],(n=null)&&h(e.prototype,n),r&&h(e,r),t}()},arjl:function(t,e,n){var r=n("ZfjD"),i=n("wZF9"),o=n("70tN"),a=n("YEnO"),s=n("MEJ2"),c=n("QDZz");r({target:"Reflect",stat:!0},{get:function t(e,n){var r,u,l=arguments.length<3?e:arguments[2];return o(e)===l?e[n]:(r=s.f(e,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(l):i(u=c(e))?t(u,n,l):void 0}})},gjpc:function(t,e,n){"use strict";n.r(e);var r=n("ZeWX"),i=n("CX32");document.addEventListener("DOMContentLoaded",(function(){new r.a,new i.a}))},jF6B:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n("9U97"),n("t3Gg"),n("+kFb"),n("Id6h");var r=n("G3fq"),i=n.n(r),o=n("3a3M"),a=n.n(o),s=n("/lV4"),c=n("2ibD"),u=n("VQ4T"),l=n("NmEs");function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.backOffRequestCounter=0,this.$wrapper=a()(e),this.$monitoredMetricsPanel=this.$wrapper.find(".js-panel-monitored-metrics"),this.$monitoredMetricsCount=this.$monitoredMetricsPanel.find(".js-monitored-count"),this.$monitoredMetricsLoading=this.$monitoredMetricsPanel.find(".js-loading-metrics"),this.$monitoredMetricsEmpty=this.$monitoredMetricsPanel.find(".js-empty-metrics"),this.$monitoredMetricsList=this.$monitoredMetricsPanel.find(".js-metrics-list"),this.$missingEnvVarPanel=this.$wrapper.find(".js-panel-missing-env-vars"),this.$panelToggle=this.$missingEnvVarPanel.find(".js-panel-toggle"),this.$missingEnvVarMetricCount=this.$missingEnvVarPanel.find(".js-env-var-count"),this.$missingEnvVarMetricsList=this.$missingEnvVarPanel.find(".js-missing-var-metrics-list"),this.activeMetricsEndpoint=this.$monitoredMetricsPanel.data("activeMetrics"),this.helpMetricsPath=this.$monitoredMetricsPanel.data("metrics-help-path"),this.$panelToggle.on("click",(function(t){return n.handlePanelToggle(t)}))}var e,n,r;return e=t,(n=[{key:"init",value:function(){this.loadActiveMetrics()}},{key:"handlePanelToggle",value:function(t){var e=a()(t.currentTarget);e.closest(".card").find(".card-body").toggleClass("hidden"),e.hasClass("fa-caret-down")?e.removeClass("fa-caret-down").addClass("fa-caret-right"):e.removeClass("fa-caret-right").addClass("fa-caret-down")}},{key:"showMonitoringMetricsPanelState",value:function(t){switch(t){case u.a.LOADING:this.$monitoredMetricsLoading.removeClass("hidden"),this.$monitoredMetricsEmpty.addClass("hidden"),this.$monitoredMetricsList.addClass("hidden");break;case u.a.LIST:this.$monitoredMetricsLoading.addClass("hidden"),this.$monitoredMetricsEmpty.addClass("hidden"),this.$monitoredMetricsList.removeClass("hidden");break;default:this.$monitoredMetricsLoading.addClass("hidden"),this.$monitoredMetricsEmpty.removeClass("hidden"),this.$monitoredMetricsList.addClass("hidden")}}},{key:"populateActiveMetrics",value:function(t){var e=this,n=0,r=0,o=0;if(t.forEach((function(t){t.active_metrics>0&&(o+=1,e.$monitoredMetricsList.append("<li>".concat(i()(t.group),'<span class="badge">').concat(i()(t.active_metrics),"</span></li>")),n+=t.active_metrics,t.metrics_missing_requirements>0&&(e.$missingEnvVarMetricsList.append("<li>".concat(i()(t.group),"</li>")),r+=1))})),0===n){var a=Object(s.e)(Object(s.d)('PrometheusService|<p class="text-tertiary">No <a href="%{docsUrl}">common metrics</a> were found</p>'),{docsUrl:this.helpMetricsPath},!1);this.$monitoredMetricsEmpty.empty(),this.$monitoredMetricsEmpty.append(a),this.showMonitoringMetricsPanelState(u.a.EMPTY)}else{var c=Object(s.e)(Object(s.d)("PrometheusService|%{exporters} with %{metrics} were found"),{exporters:Object(s.c)("%d exporter","%d exporters",o),metrics:Object(s.c)("%d metric","%d metrics",n)});this.$monitoredMetricsCount.text(c),this.showMonitoringMetricsPanelState(u.a.LIST),r>0&&(this.$missingEnvVarPanel.removeClass("hidden"),this.$missingEnvVarMetricCount.text(r))}}},{key:"loadActiveMetrics",value:function(){var t=this;this.showMonitoringMetricsPanelState(u.a.LOADING),Object(l.e)((function(e,n){c.a.get(t.activeMetricsEndpoint).then((function(r){var i=r.data;i&&i.success?n(i):(t.backOffRequestCounter+=1,t.backOffRequestCounter<3?e():n(i))})).catch(n)})).then((function(e){e&&e.data&&e.data.length?t.populateActiveMetrics(e.data):t.showMonitoringMetricsPanelState(u.a.EMPTY)})).catch((function(){t.showMonitoringMetricsPanelState(u.a.EMPTY)}))}}])&&d(e.prototype,n),r&&d(e,r),t}()},"k/Fq":function(t,e,n){"use strict";n("9U97"),n("8Qi2"),n("MRnW"),n("jaBk");var r=n("3a3M"),i=n.n(r),o=n("qPgm"),a=(n("gyUR"),n("4ql4"),n("IdsT"),n("pBsb"),n("n7CP"));function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectSelectInput=i()(e),this.newItemBtn=i()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var e,r,o;return e=t,(r=[{key:"bindEvents",value:function(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(e){return t.openDropdown(e)})),this.newItemBtn.on("click",(function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))})),this.projectSelectInput.on("change",(function(){return t.selectProject()}))}},{key:"initLocalStorage",value:function(){a.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(t){n.e(311).then(n.t.bind(null,"p9g0",7)).then((function(){i()(t.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}},{key:"setBtnTextFromLocalStorage",value:function(){var t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}},{key:"setNewItemBtnAttributes",value:function(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}},{key:"setProjectInLocalStorage",value:function(t){var e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}},{key:"deriveTextVariants",value:function(){var t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&s(e.prototype,r),o&&s(e,o),t}(),u=n("/lV4"),l=function(){i()(".ajax-project-select").each((function(t,e){var n,r=this,a=i()(e).data("simpleFilter")||!1,s=i()(e).data("select2");return this.groupId=i()(e).data("groupId"),this.userId=i()(e).data("userId"),this.includeGroups=i()(e).data("includeGroups"),this.allProjects=i()(e).data("allProjects")||!1,this.orderBy=i()(e).data("orderBy")||"id",this.withIssuesEnabled=i()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=i()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===i()(e).data("withShared")||i()(e).data("withShared"),this.includeProjectsInSubgroups=i()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=i()(e).data("allowClear")||!1,n=Object(u.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(u.d)("ProjectSelect| or group")),i()(e).select2({placeholder:n,minimumInputLength:0,query:function(t){var e,n=function(e){var n={results:e};return t.callback(n)};return e=r.includeGroups?function(e){return o.a.groups(t.term,{},(function(t){var r=t.concat(e);return n(r)}))}:n,r.groupId?o.a.groupProjects(r.groupId,t.term,{search_namespaces:!0,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},e):r.userId?o.a.userProjects(r.userId,t.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},e):o.a.projects(t.term,{order_by:r.orderBy,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,membership:!r.allProjects},e)},id:function(t){return a?t.id:JSON.stringify({name:t.name,url:t.web_url})},text:function(t){return t.name_with_namespace||t.name},initSelection:function(t,e){return o.a.project(t.val()).then((function(t){var n=t.data;return e(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),s||a?e:new c(e)}))};e.a=function(){return n.e(311).then(n.t.bind(null,"p9g0",7)).then(l).catch((function(){}))}},uHqx:function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}}},[[175,1,0,13,39]]]);
//# sourceMappingURL=pages.projects.services.edit.932964fe.chunk.js.map