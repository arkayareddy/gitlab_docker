(this.webpackJsonp=this.webpackJsonp||[]).push([[8],{B8wJ:function(e,t,a){"use strict";a("kO4A"),a("+kFb"),a("S6uq"),a("Id6h");function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store={columns:3,issues:[],issuesCount:!1,selectedIssues:[],showAddIssuesModal:!1,activeTab:"all",selectedList:null,searchTerm:"",loading:!1,loadingNewPage:!1,filterLoading:!1,page:1,perPage:50,filter:{path:""}}}var t,a,s;return t=e,(a=[{key:"selectedCount",value:function(){return this.getSelectedIssues().length}},{key:"toggleIssue",value:function(e){var t=e,a=t.selected;t.selected=!a,a?this.removeSelectedIssue(t):this.addSelectedIssue(t)}},{key:"toggleAll",value:function(){var e=this,t=this.selectedCount()!==this.store.issues.length;this.store.issues.forEach((function(a){var n=a;n.selected!==t&&(n.selected=t,t?e.addSelectedIssue(a):e.removeSelectedIssue(a))}))}},{key:"getSelectedIssues",value:function(){return this.store.selectedIssues.filter((function(e){return e.selected}))}},{key:"addSelectedIssue",value:function(e){-1===this.selectedIssueIndex(e)&&this.store.selectedIssues.push(e)}},{key:"removeSelectedIssue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];("all"===this.store.activeTab||t)&&(this.store.selectedIssues=this.store.selectedIssues.filter((function(t){return t.id!==e.id})))}},{key:"purgeUnselectedIssues",value:function(){var e=this;this.store.selectedIssues.forEach((function(t){t.selected||e.removeSelectedIssue(t,!0)}))}},{key:"selectedIssueIndex",value:function(e){return this.store.selectedIssues.indexOf(e)}},{key:"findSelectedIssue",value:function(e){return this.store.selectedIssues.filter((function(t){return t.id===e.id}))[0]}}])&&n(t.prototype,a),s&&n(t,s),e}();t.a=new s},YqVM:function(e,t,a){var n=a("nHTl"),s=a("dA+0");e.exports=function(e,t){return e&&e.length?s(e,n(t,2)):[]}},yYhH:function(e,t,a){"use strict";a("va8A"),a("z4I3"),a("dj/k"),a("9U97"),a("kO4A"),a("t3Gg"),a("+kFb"),a("S6uq"),a("x/6R"),a("Z5ek"),a("4ql4"),a("jnfO"),a("8Qi2"),a("zCcL"),a("zpLX"),a("BD5p"),a("MRnW"),a("jaBk"),a("IdsT"),a("tbvx"),a("l9AF"),a("S26F"),a("+xeR"),a("Id6h"),a("orcL");var n=a("YqVM"),s=a.n(n),r=a("05sH"),i=a.n(r),l=a("G3fq"),o=a.n(l),u=a("3a3M"),c=a.n(u),d=a("2ibD"),f=a("/lV4"),m=a("B8wJ"),v=a("NmEs"),p={projectId:"projectId",groupId:"groupId",showCurrentUser:"currentUser",authorId:"authorId",skipUsers:"skipUsers"},h={project_id:"projectId",group_id:"groupId",skip_ldap:"skipLdap",todo_filter:"todoFilter",todo_state_filter:"todoStateFilter",current_user:"showCurrentUser",author_id:"authorId",skip_users:"skipUsers"},g=(a("yaFd"),function(e,t){return Object.keys(t).reduce((function(a,n){var s=t[n];return a[n]=e.data(s),a}),{})});function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=c()(t||".js-user-search");this.users=this.users.bind(this),this.user=this.user.bind(this),this.usersPath="/autocomplete/users.json",this.userPath="/autocomplete/users/:id.json",null!=e&&("object"===j(e)?this.currentUser=e:this.currentUser=JSON.parse(e));var u=r.handleClick,h=this;l.each((function(e,t){var a=n,r={},l=c()(t);r.projectId=l.data("projectId"),r.groupId=l.data("groupId"),r.showCurrentUser=l.data("currentUser"),r.todoFilter=l.data("todoFilter"),r.todoStateFilter=l.data("todoStateFilter"),r.iid=l.data("iid"),r.issuableType=l.data("issuableType");var p=l.data("nullUser"),h=l.data("nullUserDefault"),g=l.data("showMenuAbove"),b=l.data("anyUser"),y=l.data("firstUser");r.authorId=l.data("authorId");var j,w,I,S=l.data("defaultLabel"),k=l.data("issueUpdate"),O=l.closest(".selectbox"),U=O.closest(".block"),_=l.data("abilityName"),x=U.find(".value"),C=U.find(".sidebar-collapsed-user"),D=U.find(".block-loading").fadeOut(),N=h&&p?0:null,A=l.data("selected");void 0===A&&(A=N);var T=function(){var e=l.closest(".selectbox").find("input[name='".concat(l.data("fieldName"),"'][value=0]"));e&&e.remove();var t=l.data("currentUserInfo")||{},n=a.currentUser||{},s=l.data("fieldName"),r=t.name,o=t.id||n.id,u=i()('\n        <input type="hidden" name="<%- fieldName %>"\n          data-meta="<%- userName %>"\n          value="<%- userId %>" />\n        ')({fieldName:s,userName:r,userId:o});O?l.parent().before(u):l.after(u)};U[0]&&U[0].addEventListener("assignYourself",T);var E=function(){return O.find('input[name="'.concat(l.data("fieldName"),'"]'))},P=function(){return E().map((function(e,t){return parseInt(t.value,10)})).get()},L=function(){var e=l.data("maxSelect");if(e){var t=P();if(t.length>e){var a=t[0];l.closest(".selectbox").find("input[name='".concat(l.data("fieldName"),"'][value=").concat(a,"]")).remove(),emitSidebarEvent("sidebar.removeAssignee",{id:a})}}},M=function(e,t){var a=P().filter((function(e){return 0!==e})),n=E().map((function(e,t){return{name:t.dataset.meta,value:parseInt(t.value,10)}})).filter((function(e){return 0!==e.id})).get(0);if(0===a.length)return Object(f.d)("UsersSelect|Unassigned");if(1===a.length)return n.name;if(t){var s=a.filter((function(t){return t!==e.id}));return Object(f.e)(Object(f.d)("UsersSelect|%{name} + %{length} more"),{name:e.name,length:s.length})}return Object(f.e)(Object(f.d)("UsersSelect|%{name} + %{length} more"),{name:n.name,length:a.length-1})};return c()(".assign-to-me-link").on("click",(function(e){if(e.preventDefault(),c()(e.currentTarget).hide(),l.data("multiSelect")){T(),L();var t=l.data("currentUserInfo");l.find(".dropdown-toggle-text").text(M(t)).removeClass("is-default")}else{var a=c()('input[name="'.concat(l.data("fieldName"),'"]'));a.val(gon.current_user_id),A=a.val(),l.find(".dropdown-toggle-text").text(gon.current_user_fullname).removeClass("is-default")}})),U.on("click",".js-assign-yourself",(function(e){return e.preventDefault(),j(a.currentUser.id)})),j=function(e){var t={};return t[_]={},t[_].assignee_id=null!=e?e:null,D.removeClass("hidden").fadeIn(),l.trigger("loading.gl.dropdown"),d.a.put(k,t).then((function(e){var t=e.data,a={},n=a.name;return l.trigger("loaded.gl.dropdown"),D.fadeOut(),t.assignee?(a={name:t.assignee.name,username:t.assignee.username,avatar:t.assignee.avatar_url},n=o()(a.name)):(a={name:Object(f.d)("UsersSelect|Unassigned"),username:"",avatar:""},n=Object(f.d)("UsersSelect|Assignee")),x.html(w(a)),C.attr("title",n).tooltip("_fixTitle"),C.html(I(a))}))},I=i()('<% if( avatar ) { %> <a class="author-link" href="/<%- username %>"> <img width="24" class="avatar avatar-inline s24" alt="" src="<%- avatar %>"> </a> <% } else { %> <i class="fa fa-user"></i> <% } %>'),w=i()('<% if (username) { %> <a class="author-link bold" href="/<%- username %>"> <% if( avatar ) { %> <img width="32" class="avatar avatar-inline s32" alt="" src="<%- avatar %>"> <% } %> <span class="author"><%- name %></span> <span class="username"> @<%- username %> </span> </a> <% } else { %> <span class="no-value assign-yourself">\n      '.concat(Object(f.e)(Object(f.d)("UsersSelect|No assignee - %{openingTag} assign yourself %{closingTag}"),{openingTag:'<a href="#" class="js-assign-yourself">',closingTag:"</a>"}),"</span> <% } %>")),l.glDropdown({showMenuAbove:g,data:function(e,t){var n=this;return a.users(e,r,(function(a){(n.instance||n.options.instance).options.processData(e,a,t)}))},processData:function(e,t,a){var n,r,i,o,u,c,d=t;if(l.hasClass("js-multiselect")&&0===e.length){var m=E(),h=s()(m,(function(e){return e.value})).filter((function(e){var t=parseInt(e.value,10);return!d.find((function(e){return e.id===t}))&&0!==t})).map((function(e){var t=parseInt(e.value,10),a=e.dataset,n=a.avatarUrl,s=a.avatar_url,r=a.name,i=a.username,l=a.canMerge;return{avatar_url:n||s,id:t,name:r,username:i,can_merge:Object(v.H)(l)}}));d=t.concat(h)}if(0===e.length){if(c=0,y)for(r=0,i=d.length;r<i;r+=1)if((u=d[r]).username===y){d.splice(r,1),d.unshift(u);break}if(p&&(c+=1,d.unshift({beforeDivider:!0,name:Object(f.d)("UsersSelect|Unassigned"),id:0})),b&&(c+=1,!0===(o=b)&&(o=Object(f.d)("UsersSelect|Any User")),n={beforeDivider:!0,name:o,id:null},d.unshift(n)),c&&d.splice(c,0,{type:"divider"}),l.hasClass("js-multiselect")){var j=P().filter((function(e){return 0!==e}));if(j.length>0){l.data("dropdownHeader")&&(c+=1,d.splice(c,0,{type:"header",content:l.data("dropdownHeader")}));var w=d.filter((function(e){return-1!==j.indexOf(e.id)})).sort((function(e,t){return e.name>t.name}));d=d.filter((function(e){return-1===j.indexOf(e.id)})),w.forEach((function(e){c+=1,d.splice(c,0,e)})),d.splice(c+1,0,{type:"divider"})}}}a(d),g&&l.data("glDropdown").positionMenuAbove()},filterable:!0,filterRemote:!0,search:{fields:["name","username"]},selectable:!0,fieldName:l.data("fieldName"),toggleLabel:function(e,t,a){var n=a.filterInput.val();if(this.multiSelect&&""===n){var s=a.filteredFullData(),r=a.parseData.bind(a);this.processData(n,s,r)}return this.multiSelect?M(e,c()(t).hasClass("is-active")):e&&"id"in e&&c()(t).hasClass("is-active")?(l.find(".dropdown-toggle-text").removeClass("is-default"),e.text?e.text:e.name):(l.find(".dropdown-toggle-text").addClass("is-default"),S)},defaultLabel:S,hidden:function(){l.hasClass("js-multiselect")&&emitSidebarEvent("sidebar.saveAssignees"),l.data("alwaysShowSelectbox")||(O.hide(),U=O.closest(".block"),(x=U.find(".value")).css("display",""))},multiSelect:l.hasClass("js-multiselect"),inputMeta:l.data("inputMeta"),clicked:function(e){var t=e.$el,a=e.e,n=e.isMarking,s=e.selectedObj;if(t.tooltip("dispose"),l.hasClass("js-multiselect")){var r=t.hasClass("is-active"),i=l.closest(".selectbox").find("input[name='".concat(l.data("fieldName"),"'][value!=0]"));if(L(),s.beforeDivider&&"unassigned"===s.name.toLowerCase())i.each((function(e,t){t.remove()})),emitSidebarEvent("sidebar.removeAllAssignees");else if(r){emitSidebarEvent("sidebar.addAssignee",s);var o=l.closest(".selectbox").find("input[name='".concat(l.data("fieldName"),"'][value=0]"));o&&o.remove()}else 0===i.length&&this.addInput(l.data("fieldName"),0,{}),emitSidebarEvent("sidebar.removeAssignee",s);P().find((function(e){return e===gon.current_user_id}))?c()(".assign-to-me-link").hide():c()(".assign-to-me-link").show()}var d=c()("body").attr("data-page"),f="projects:issues:index"===d,v=d==d&&"projects:merge_requests:index"===d;if(l.hasClass("js-filter-bulk-update")||l.hasClass("js-issuable-form-dropdown")){a.preventDefault();var p=s.id!==A;(A=p?s.id:N)===gon.current_user_id?c()(".assign-to-me-link").hide():c()(".assign-to-me-link").show()}else{if(t.closest(".add-issues-modal").length)m.a.store.filter[l.data("fieldName")]=s.id;else if(u)a.preventDefault(),u(s,n);else{if(l.hasClass("js-filter-submit")&&(f||v))return Issuable.filterResults(l.closest("form"));if(l.hasClass("js-filter-submit"))return l.closest("form").submit();if(!l.hasClass("js-multiselect")){var h=l.closest(".selectbox").find("input[name='".concat(l.data("fieldName"),"']")).val();return j(h)}}l.data("maxSelect")&&P().length===l.data("maxSelect")&&l.dropdown("toggle")}},id:function(e){return e.id},opened:function(e){var t=c()(e.currentTarget),a=P();function n(e){t.find('li[data-user-id="'.concat(e,'"] .dropdown-menu-user-link')).addClass("is-active")}l.hasClass("js-issue-board-sidebar")&&0===a.length&&this.addInput(l.data("fieldName"),0,{}),t.find(".is-active").removeClass("is-active"),a.length>0?P().forEach((function(e){return n(e)})):l.hasClass("js-issue-board-sidebar")?n(0):n(A)},updateLabel:l.data("dropdownTitle"),renderRow:function(e){var t=e.username?"@".concat(e.username):"",n=e.avatar_url?e.avatar_url:gon.default_avatar_url,s=!1;if(this.multiSelect){s=P().find((function(t){return e.id===t}));var i=this.fieldName;l.closest(".selectbox").find("input[name='".concat(i,"'][value='").concat(e.id,"']")).length&&(s=!0)}else s=e.id===A;var u="";return null!=e.beforeDivider?"<li><a href='#' class='".concat(!0===s?"is-active":"","'>").concat(o()(e.name),"</a></li>"):u="<img src='".concat(n,"' class='avatar avatar-inline m-0' width='32' />"),a.renderRow(r.issuableType,e,s,t,u)}})})),a.e(311).then(a.t.bind(null,"p9g0",7)).then((function(){c()(".ajax-users-select").each((function(e,t){var a=g(c()(t),p);a.skipLdap=c()(t).hasClass("skip_ldap");var n=c()(t).data("nullUser"),s=c()(t).data("anyUser"),r=c()(t).data("emailUser"),i=c()(t).data("firstUser");return c()(t).select2({placeholder:Object(f.a)("Search for a user"),multiple:c()(t).hasClass("multiselect"),minimumInputLength:0,query:function(e){return h.users(e.term,a,(function(t){var a,l={results:t};if(0===e.term.length){if(i)for(var o=l.results,u=0,c=o.length;u<c;u+=1){var d=o[u];if(d.username===i){l.results.splice(u,1),l.results.unshift(d);break}}if(n){var m={name:Object(f.d)("UsersSelect|Unassigned"),id:0};l.results.unshift(m)}if(s){!0===(a=s)&&(a=Object(f.d)("UsersSelect|Any User"));var v={name:a,id:null};l.results.unshift(v)}}if(r&&0===l.results.length&&e.term.match(/^[^@]+@[^@]+$/)){var p=e.term.trim(),h={name:Object(f.e)(Object(f.a)('Invite "%{trimmed}" by email'),{trimmed:p}),username:p,id:p,invite:!0};l.results.unshift(h)}return e.callback(l)}))},initSelection:function(){var e=1<=arguments.length?[].slice.call(arguments,0):[];return h.initSelection.apply(h,e)},formatResult:function(){var e=1<=arguments.length?[].slice.call(arguments,0):[];return h.formatResult.apply(h,e)},formatSelection:function(){var e=1<=arguments.length?[].slice.call(arguments,0):[];return h.formatSelection.apply(h,e)},dropdownCssClass:"ajax-users-dropdown",escapeMarkup:function(e){return e}})}))})).catch((function(){}))}window.emitSidebarEvent=window.emitSidebarEvent||c.a.noop,w.prototype.initSelection=function(e,t){var a=c()(e).val();return"0"===a?t({name:Object(f.d)("UsersSelect|Unassigned")}):""!==a?this.user(a,t):void 0},w.prototype.formatResult=function(e){var t=gon.default_avatar_url;return e.avatar_url&&(t=e.avatar_url),"\n    <div class='user-result'>\n      <div class='user-image'>\n        <img class='avatar avatar-inline s32' src='".concat(t,"'>\n      </div>\n      <div class='user-info'>\n        <div class='user-name dropdown-menu-user-full-name'>\n          ").concat(o()(e.name),"\n        </div>\n        <div class='user-username dropdown-menu-user-username text-secondary'>\n          ").concat(e.invite?"":"@".concat(o()(e.username)),"\n        </div>\n      </div>\n    </div>\n  ")},w.prototype.formatSelection=function(e){return o()(e.name)},w.prototype.user=function(e,t){if(!/^\d+$/.test(e))return!1;var a=this.buildUrl(this.userPath);return a=a.replace(":id",e),d.a.get(a).then((function(e){var a=e.data;t(a)}))},w.prototype.users=function(e,t,a){var n=this.buildUrl(this.usersPath),s=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({search:e,active:!0},function(e,t){return Object.keys(t).reduce((function(a,n){var s=t[n];return a[n]=e[s]||null,a}),{})}(t,h));return"merge_request"===t.issuableType&&(s.merge_request_iid=t.iid||null),d.a.get(n,{params:s}).then((function(e){var t=e.data;a(t)}))},w.prototype.buildUrl=function(e){return null!=gon.relative_url_root&&(e=gon.relative_url_root.replace(/\/$/,"")+e),e},w.prototype.renderRow=function(e,t,a,n,s){var r="merge_request"!==e||t.can_merge?"":Object(f.a)("Cannot merge"),i=r?"has-tooltip":"",l="".concat(!0===a?"is-active":""," ").concat(i),u=r?'data-container="body" data-placement="left" data-title="'.concat(r,'"'):"";return"\n    <li data-user-id=".concat(t.id,'>\n      <a href="#" class="dropdown-menu-user-link d-flex align-items-center ').concat(l,'" ').concat(u,">\n        ").concat(this.renderRowAvatar(e,t,s),'\n        <span class="d-flex flex-column overflow-hidden">\n          <strong class="dropdown-menu-user-full-name">\n            ').concat(o()(t.name),"\n          </strong>\n          ").concat(n?'<span class="dropdown-menu-user-username">'.concat(n,"</span>"):"","\n        </span>\n      </a>\n    </li>\n  ")},w.prototype.renderRowAvatar=function(e,t,a){if(t.beforeDivider)return a;var n="merge_request"!==e||t.can_merge?"":'<i class="fa fa-exclamation-triangle merge-icon"></i>';return'<span class="position-relative mr-2">\n    '.concat(a,"\n    ").concat(n,"\n  </span>")};t.a=w}}]);
//# sourceMappingURL=commons~pages.admin.abuse_reports~pages.admin.groups.show~pages.dashboard.todos.index~pages.groups.b~4d6a873a.5d24d15f.chunk.js.map