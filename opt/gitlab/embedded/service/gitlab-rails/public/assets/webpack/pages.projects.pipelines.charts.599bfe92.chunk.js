(this.webpackJsonp=this.webpackJsonp||[]).push([[255],{160:function(t,e,a){a("HVBj"),a("gjpc"),t.exports=a("JJ6B")},"16r0":function(t,e,a){"use strict";var s=a("2FGo"),i=a.n(s),o=a("Gx1T"),r=a("sCiu"),n=a("93Ww"),l=a("kPIO"),c=a("Qog8"),h=a("hXLA"),p=a("J7jM"),u=a("WkA6"),d=a("Pyw5"),m=a.n(d);const _={components:{Chart:o.a,ChartTooltip:r.a,TooltipDefaultFormat:p.a},mixins:[n.a],inheritAttrs:!1,props:{data:{type:Object,required:!0},option:{type:Object,required:!1,default:function(){return{}}},yAxisTitle:{type:String,required:!0},xAxisTitle:{type:String,required:!0},xAxisType:{type:String,required:!0,validator:function(t){return-1!==["value","category","time","log"].indexOf(t)}}},data:function(){return{chart:null,showTooltip:!1,tooltipTitle:"",tooltipContent:{},tooltipPosition:{left:"0",top:"0"},debouncedMoveShowTooltip:Object(c.b)(this.moveShowTooltip)}},computed:{series:function(){var t=this;return Object.keys(this.data).map((function(e,a){var s=Object(h.a)(a);return{name:e,data:t.data[e],type:"bar",itemStyle:{color:Object(c.d)(s,.2),barBorderColor:s,barBorderWidth:1},emphasis:{itemStyle:{color:Object(c.d)(s,.4)}},large:!0,largeThreshold:300,barMaxWidth:"50%"}}))},options:function(){var t=i()({},l.b,{xAxis:{boundaryGap:!0,axisLabel:{margin:20,verticalAlign:"bottom"},axisLine:{show:!1},axisPointer:{show:!0,type:"none",label:{formatter:this.onLabelChange}},name:this.xAxisTitle,type:this.xAxisType},yAxis:{name:this.yAxisTitle,axisTick:{show:!1}},legend:{show:!1}},this.option,Object(l.a)(this.option.dataZoom),this.toolboxAdjustments);return Object(l.m)(t,this.series)}},beforeDestroy:function(){this.chart.getDom().removeEventListener("mousemove",this.debouncedMoveShowTooltip),this.chart.getDom().removeEventListener("mouseout",this.debouncedMoveShowTooltip)},methods:{moveShowTooltip:function(t){this.tooltipPosition={left:"".concat(t.zrX+u.k,"px"),top:"".concat(t.zrY,"px")},this.showTooltip=this.chart.containPixel("grid",[t.zrX,t.zrY])},onCreated:function(t){t.getDom().addEventListener("mousemove",this.debouncedMoveShowTooltip),t.getDom().addEventListener("mouseout",this.debouncedMoveShowTooltip),this.chart=t,this.$emit("created",t)},onLabelChange:function(t){var e=Object(l.g)(t,this.yAxisTitle),a=e.xLabels,s=e.tooltipContent;this.$set(this,"tooltipContent",s),this.tooltipTitle=a.join(", ")},onUpdated:function(t){this.$emit("updated",t)}}};const v=m()({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"position-relative"},[a("chart",t._g(t._b({attrs:{options:t.options},on:{created:t.onCreated,updated:t.onUpdated}},"chart",t.$attrs,!1),t.$listeners)),t._v(" "),t.chart?a("chart-tooltip",{attrs:{show:t.showTooltip,chart:t.chart,top:t.tooltipPosition.top,left:t.tooltipPosition.left}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.tooltipTitle)+" ("+t._s(t.xAxisTitle)+")")]),t._v(" "),a("tooltip-default-format",{attrs:{"tooltip-content":t.tooltipContent}})],1):t._e()],1)},staticRenderFns:[]},void 0,_,void 0,!1,void 0,!1,void 0,void 0,void 0);e.a=v},JJ6B:function(t,e,a){"use strict";a.r(e);var s=a("jB52"),i=(a("x/6R"),a("Z5ek"),a("MRnW"),a("orcL"),a("a+C/")),o=a.n(i),r=a("/lV4"),n=a("16r0"),l=a("bOix"),c={props:{counts:{type:Object,required:!0}}},h=a("tBpV"),p=Object(h.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("span",[t._v(t._s(t.s__("PipelineCharts|Total:")))]),t._v(" "),a("strong",[t._v(t._s(t.n__("1 pipeline","%d pipelines",t.counts.total)))])]),t._v(" "),a("li",[a("span",[t._v(t._s(t.s__("PipelineCharts|Successful:")))]),t._v(" "),a("strong",[t._v(t._s(t.n__("1 pipeline","%d pipelines",t.counts.success)))])]),t._v(" "),a("li",[a("span",[t._v(t._s(t.s__("PipelineCharts|Failed:")))]),t._v(" "),a("strong",[t._v(t._s(t.n__("1 pipeline","%d pipelines",t.counts.failed)))])]),t._v(" "),a("li",[a("span",[t._v(t._s(t.s__("PipelineCharts|Success ratio:")))]),t._v(" "),a("strong",[t._v(t._s(t.counts.successRatio)+"%")])])])}),[],!1,null,null,null).exports,u=a("mlng"),d=a("8WOL"),m={components:{GlAreaChart:u.a,ResizableChartContainer:d.a},props:{chartData:{type:Array,required:!0}},areaChartOptions:{xAxis:{name:Object(r.d)("Pipeline|Date"),type:"category"},yAxis:{name:Object(r.d)("Pipeline|Pipelines")}},chartContainerHeight:300},_=Object(h.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"prepend-top-default"},[a("p",[t._t("default")],2),t._v(" "),a("resizable-chart-container",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.width;return a("gl-area-chart",{attrs:{width:s,height:t.$options.chartContainerHeight,data:t.chartData,"include-legend-avg-max":!1,option:t.$options.areaChartOptions}})}}])})],1)}),[],!1,null,null,null).exports,v={components:{StatisticsList:p,GlColumnChart:n.a,PipelinesAreaChart:_},props:{counts:{type:Object,required:!0},timesChartData:{type:Object,required:!0},lastWeekChartData:{type:Object,required:!0},lastMonthChartData:{type:Object,required:!0},lastYearChartData:{type:Object,required:!0}},data:function(){return{timesChartTransformedData:{full:this.mergeLabelsAndValues(this.timesChartData.labels,this.timesChartData.values)}}},computed:{areaCharts:function(){var t=this.$options.chartTitles,e=t.lastWeek,a=t.lastMonth,s=t.lastYear;return[this.buildAreaChartData(e,this.lastWeekChartData),this.buildAreaChartData(a,this.lastMonthChartData),this.buildAreaChartData(s,this.lastYearChartData)]}},methods:{mergeLabelsAndValues:function(t,e){return t.map((function(t,a){return[t,e[a]]}))},buildAreaChartData:function(t,e){var a=e.labels,s=e.totals,i=e.success;return{title:t,data:[{name:"all",data:this.mergeLabelsAndValues(a,s)},{name:"success",data:this.mergeLabelsAndValues(a,i)}]}}},chartContainerHeight:300,timesChartOptions:{height:200,xAxis:{axisLabel:{rotate:45},nameGap:60}},get chartTitles(){var t=o()(new Date,"dd mmm"),e=function(t){return o()(Object(l.f)(new Date,t),"dd mmm")};return{lastWeek:Object(r.e)(Object(r.a)("Pipelines for last week (%{oneWeekAgo} - %{today})"),{oneWeekAgo:e(7),today:t}),lastMonth:Object(r.e)(Object(r.a)("Pipelines for last month (%{oneMonthAgo} - %{today})"),{oneMonthAgo:e(31),today:t}),lastYear:Object(r.a)("Pipelines for last year")}}},C=Object(h.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mb-3"},[a("h3",[t._v(t._s(t.s__("PipelineCharts|CI / CD Analytics")))])]),t._v(" "),a("h4",{staticClass:"my-4"},[t._v(t._s(t.s__("PipelineCharts|Overall statistics")))]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("statistics-list",{attrs:{counts:t.counts}})],1),t._v(" "),a("div",{staticClass:"col-md-6"},[a("strong",[t._v("\n        "+t._s(t.__("Duration for the last 30 commits"))+"\n      ")]),t._v(" "),a("gl-column-chart",{attrs:{height:t.$options.chartContainerHeight,option:t.$options.timesChartOptions,data:t.timesChartTransformedData,"y-axis-title":t.__("Minutes"),"x-axis-title":t.__("Commit"),"x-axis-type":"category"}})],1)]),t._v(" "),a("hr"),t._v(" "),a("h4",{staticClass:"my-4"},[t._v(t._s(t.__("Pipelines charts")))]),t._v(" "),t._l(t.areaCharts,(function(e,s){return a("pipelines-area-chart",{key:s,attrs:{"chart-data":e.data}},[t._v("\n    "+t._s(e.title)+"\n  ")])}))],2)}),[],!1,null,null,null).exports;document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector("#js-project-pipelines-charts-app"),e=t.dataset,a=e.countsFailed,i=e.countsSuccess,o=e.countsTotal,r=e.successRatio,n=e.timesChartLabels,l=e.timesChartValues,c=e.lastWeekChartLabels,h=e.lastWeekChartTotals,p=e.lastWeekChartSuccess,u=e.lastMonthChartLabels,d=e.lastMonthChartTotals,m=e.lastMonthChartSuccess,_=e.lastYearChartLabels,v=e.lastYearChartTotals,b=e.lastYearChartSuccess,f=function(t,e,a){return{labels:JSON.parse(t),totals:JSON.parse(e),success:JSON.parse(a)}};return new s.default({el:t,name:"ProjectPipelinesChartsApp",components:{ProjectPipelinesCharts:C},render:function(t){return t(C,{props:{counts:{failed:a,success:i,total:o,successRatio:r},timesChartData:{labels:JSON.parse(n),values:JSON.parse(l)},lastWeekChartData:f(c,h,p),lastMonthChartData:f(u,d,m),lastYearChartData:f(_,v,b)}})}})}))}},[[160,1,0,24,70]]]);
//# sourceMappingURL=pages.projects.pipelines.charts.599bfe92.chunk.js.map