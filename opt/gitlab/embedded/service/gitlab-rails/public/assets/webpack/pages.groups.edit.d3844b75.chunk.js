(this.webpackJsonp=this.webpackJsonp||[]).push([[142],{"38Gl":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));n("+kFb"),n("Id6h"),n("S6uq"),n("jnfO"),n("8Qi2"),n("MRnW"),n("GzNv");var a=n("h7kv"),r=n.n(a),i=n("htNe"),s=n.n(i),o=n("3a3M"),u=n.n(o);function c(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=e,this.dirtyInputs=[],this.isDisabled=!0,this.init()}var e,n,a;return e=t,a=[{key:"initInput",value:function(e){e.dataset.isDirtySubmitInput=!0,e.dataset.dirtySubmitOriginalValue=t.inputCurrentValue(e)}},{key:"isInputCheckable",value:function(t){return"checkbox"===t.type||"radio"===t.type}},{key:"inputCurrentValue",value:function(e){return t.isInputCheckable(e)?e.checked.toString():e.value}}],(n=[{key:"init",value:function(){this.inputs=this.form.querySelectorAll("input, textarea, select"),this.submits=this.form.querySelectorAll("input[type=submit], button[type=submit]"),this.inputs.forEach(t.initInput),this.toggleSubmission(),this.registerListeners()}},{key:"registerListeners",value:function(){var e=this,n=s()((function(){return r()((function(t){return e.updateDirtyInput(t)}),t.THROTTLE_DURATION)})),a=function(t){n(t.target.name)(t)};this.form.addEventListener("input",a),this.form.addEventListener("change",a),u()(this.form).on("change.select2",a),this.form.addEventListener("submit",(function(t){return e.formSubmit(t)}))}},{key:"updateDirtyInput",value:function(t){var e=t.target;e.dataset.isDirtySubmitInput&&(this.updateDirtyInputs(e),this.toggleSubmission())}},{key:"updateDirtyInputs",value:function(e){var n=e.name,a=e.dataset.dirtySubmitOriginalValue!==t.inputCurrentValue(e),r=this.dirtyInputs.indexOf(n),i=-1!==r;a&&!i&&this.dirtyInputs.push(n),!a&&i&&this.dirtyInputs.splice(r,1)}},{key:"toggleSubmission",value:function(){var t=this;this.isDisabled=0===this.dirtyInputs.length,this.submits.forEach((function(e){e.disabled=t.isDisabled}))}},{key:"formSubmit",value:function(t){return this.isDisabled&&(t.preventDefault(),t.stopImmediatePropagation()),!this.isDisabled}}])&&c(e.prototype,n),a&&c(e,a),t}();l.THROTTLE_DURATION=500;var d=l;var f=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.forms=e,this.dirtySubmits=[],this.forms.forEach((function(t){return n.dirtySubmits.push(new d(t))}))};function p(t){return new(t instanceof NodeList||t instanceof Array?f:d)(t)}},47:function(t,e,n){n("HVBj"),t.exports=n("J1wM")},J1wM:function(t,e,n){"use strict";n.r(e);var a=n("z1DD"),r=(n("9U97"),n("3a3M")),i=n.n(r),s=n("/lV4");function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.groupDropdown=i()(".js-groups-dropdown"),this.parentInput=i()("#new_parent_group_id"),this.data=this.groupDropdown.data("data"),this.init()}var e,n,a;return e=t,(n=[{key:"init",value:function(){this.buildDropdown()}},{key:"buildDropdown",value:function(){var t=this,e=[{id:"-1",text:Object(s.a)("No parent group")},{type:"divider"}];this.groupDropdown.glDropdown({selectable:!0,filterable:!0,toggleLabel:function(t){return t.text},search:{fields:["text"]},data:e.concat(this.data),text:function(t){return t.text},clicked:function(e){e.e.preventDefault(),t.assignSelected(e.selectedObj)}})}},{key:"assignSelected",value:function(t){this.parentInput.val(t.id),this.parentInput.change()}}])&&o(e.prototype,n),a&&o(e,a),t}(),c=n("h1NV"),l=n("r5uf"),d=n("u5H2"),f=n("38Gl"),p=n("iImK"),h=n("CPfm"),g=n("n9rM"),m=n("k/Fq");document.addEventListener("DOMContentLoaded",(function(){return Object(a.a)(),Object(c.a)(),Object(l.a)(),Object(f.a)(document.querySelectorAll(".js-general-settings-form, .js-general-permissions-form")),Object(p.a)(h.a),Object(d.a)(".js-group-transfer-form","#new_parent_group_id"),Object(g.a)(),Object(m.a)(),new u}))},h1NV:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n("3a3M"),r=n.n(a),i=n("NmEs");function s(){r()(document).on("click",".js-confirm-danger",(function(t){var e=r()(t.target),n=e.data("checkFieldName"),a=e.data("checkCompareValue"),s=parseInt(r()('[name="'.concat(n,'"]')).val(),10);(!n||s<a)&&(t.preventDefault(),function(t,e,n){var a=r()(".js-confirm-danger-input",e);a.val(""),r()(".js-confirm-text",e).text(n||""),e.modal("show");var s=r()(".js-confirm-danger-match",e).text(),o=r()(".js-confirm-danger-submit",e);o.disable(),a.focus(),a.off("input").on("input",(function(){Object(i.P)(r()(this).val())===s?o.enable():o.disable()})),r()(".js-confirm-danger-submit",e).off("click").on("click",(function(){return t.submit()}))}(e.closest("form"),function(t){var e=t.prev(".modal");return e.length?e:r()("#modal-confirm-danger")}(e),e.data("confirmDangerMessage")))}))}},"k/Fq":function(t,e,n){"use strict";n("9U97"),n("8Qi2"),n("MRnW"),n("jaBk");var a=n("3a3M"),r=n.n(a),i=n("qPgm"),s=(n("gyUR"),n("4ql4"),n("IdsT"),n("pBsb"),n("n7CP"));function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectSelectInput=r()(e),this.newItemBtn=r()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var e,a,i;return e=t,(a=[{key:"bindEvents",value:function(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(e){return t.openDropdown(e)})),this.newItemBtn.on("click",(function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))})),this.projectSelectInput.on("change",(function(){return t.selectProject()}))}},{key:"initLocalStorage",value:function(){s.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(t){n.e(311).then(n.t.bind(null,"p9g0",7)).then((function(){r()(t.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}},{key:"setBtnTextFromLocalStorage",value:function(){var t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}},{key:"setNewItemBtnAttributes",value:function(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}},{key:"setProjectInLocalStorage",value:function(t){var e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}},{key:"deriveTextVariants",value:function(){var t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&o(e.prototype,a),i&&o(e,i),t}(),c=n("/lV4"),l=function(){r()(".ajax-project-select").each((function(t,e){var n,a=this,s=r()(e).data("simpleFilter")||!1,o=r()(e).data("select2");return this.groupId=r()(e).data("groupId"),this.userId=r()(e).data("userId"),this.includeGroups=r()(e).data("includeGroups"),this.allProjects=r()(e).data("allProjects")||!1,this.orderBy=r()(e).data("orderBy")||"id",this.withIssuesEnabled=r()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=r()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===r()(e).data("withShared")||r()(e).data("withShared"),this.includeProjectsInSubgroups=r()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=r()(e).data("allowClear")||!1,n=Object(c.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(c.d)("ProjectSelect| or group")),r()(e).select2({placeholder:n,minimumInputLength:0,query:function(t){var e,n=function(e){var n={results:e};return t.callback(n)};return e=a.includeGroups?function(e){return i.a.groups(t.term,{},(function(t){var a=t.concat(e);return n(a)}))}:n,a.groupId?i.a.groupProjects(a.groupId,t.term,{search_namespaces:!0,with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,with_shared:a.withShared,include_subgroups:a.includeProjectsInSubgroups},e):a.userId?i.a.userProjects(a.userId,t.term,{with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,with_shared:a.withShared,include_subgroups:a.includeProjectsInSubgroups},e):i.a.projects(t.term,{order_by:a.orderBy,with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,membership:!a.allProjects},e)},id:function(t){return s?t.id:JSON.stringify({name:t.name,url:t.web_url})},text:function(t){return t.name_with_namespace||t.name},initSelection:function(t,e){return i.a.project(t.val()).then((function(t){var n=t.data;return e(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),o||s?e:new u(e)}))};e.a=function(){return n.e(311).then(n.t.bind(null,"p9g0",7)).then(l).catch((function(){}))}},n9rM:function(t,e,n){"use strict";n("9U97"),n("kO4A"),n("S6uq"),n("MRnW"),n("jaBk"),n("IdsT"),n("S26F");var a=n("G3fq"),r=n.n(a),i=n("3a3M"),s=n.n(i),o=n("2ibD"),u=n("qPgm"),c=n("NmEs"),l=n("/lV4"),d=function(){window.GROUP_SELECT_PER_PAGE=20,s()(".ajax-groups-select").each((function(){var t=s()(this),e=t.data("allAvailable"),n=t.data("skipGroups")||[],a=t.data("parentId"),i=a?u.a.subgroupsPath.replace(":id",a):u.a.groupsPath;t.select2({placeholder:Object(l.a)("Search for a group"),allowClear:t.hasClass("allowClear"),multiple:t.hasClass("multiselect"),minimumInputLength:0,ajax:{url:u.a.buildUrl(i),dataType:"json",quietMillis:250,transport:function(t){o.a[t.type.toLowerCase()](t.url,{params:t.data}).then((function(e){var n=e.data||[],a=Object(c.F)(e.headers),r=(parseInt(a["X-PAGE"],10)||0)<(parseInt(a["X-TOTAL-PAGES"],10)||0);t.success({results:n,pagination:{more:r}})})).catch(t.error)},data:function(t,n){return{search:t,page:n,per_page:window.GROUP_SELECT_PER_PAGE,all_available:e}},results:function(t,e){if(t.length)return{results:[]};var a=t.length?t:t.results||[],r=!!t.pagination&&t.pagination.more,i=a.filter((function(t){return-1===n.indexOf(t.id)}));return{results:i,page:e,more:r}}},initSelection:function(t,e){var n=s()(t).val();if(""!==n)return u.a.group(n,e)},formatResult:function(t){return"<div class='group-result'> <div class='group-name'>".concat(r()(t.full_name),"</div> <div class='group-path'>").concat(t.full_path,"</div> </div>")},formatSelection:function(t){return r()(t.full_name)},dropdownCssClass:"ajax-groups-dropdown select2-infinite",escapeMarkup:function(t){return t}}),t.on("select2-loaded",(function(){var t=document.querySelector(".select2-infinite .select2-results");t.style.height="".concat(Math.floor(t.scrollHeight),"px")}))}))};e.a=function(){return n.e(311).then(n.t.bind(null,"p9g0",7)).then(d).catch((function(){}))}},r5uf:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n("t3Gg");var a=n("3a3M"),r=n.n(a),i=n("/lV4");function s(t){t.find(".js-settings-toggle:not(.js-settings-toggle-trigger-only)").text(Object(i.a)("Collapse")),t.find(".settings-content").off("scroll.expandSection").scrollTop(0),t.addClass("expanded"),t.hasClass("no-animate")||t.addClass("animating").one("animationend.animateSection",(function(){return t.removeClass("animating")}))}function o(t){t.removeClass("no-animate"),t.hasClass("expanded")?function(t){t.find(".js-settings-toggle:not(.js-settings-toggle-trigger-only)").text(Object(i.a)("Expand")),t.find(".settings-content").on("scroll.expandSection",(function(){return s(t)})),t.removeClass("expanded"),t.hasClass("no-animate")||t.addClass("animating").one("animationend.animateSection",(function(){return t.removeClass("animating")}))}(t):s(t)}function u(){if(r()(".settings").each((function(t,e){var n=r()(e);n.on("click.toggleSection",".js-settings-toggle",(function(){return o(n)})),n.hasClass("expanded")||n.find(".settings-content").on("scroll.expandSection",(function(){n.removeClass("no-animate"),s(n)}))})),window.location.hash){var t=r()(window.location.hash);t.length&&t.hasClass("settings")&&s(t)}}},u5H2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("t3Gg");var a=n("3a3M"),r=n.n(a);function i(t,e){var n=r()(t),a=n.find(e);a.on("change",(function(){n.find(":submit").prop("disabled",!a.val())})),a.trigger("change")}},z1DD:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("+kFb"),n("IdsT"),n("S26F"),n("Id6h");function a(){document.querySelectorAll(".js-filepicker").forEach((function(t){var e=t.querySelector(".js-filepicker-button");e.addEventListener("click",(function(){e.closest("form").querySelector(".js-filepicker-input").click()}));var n=t.querySelector(".js-filepicker-input");n.addEventListener("change",(function(){var t=n.closest("form"),e=n.value.replace(/^.*[\\\/]/,"");t.querySelector(".js-filepicker-filename").textContent=e}))}))}}},[[47,1,0,48]]]);
//# sourceMappingURL=pages.groups.edit.d3844b75.chunk.js.map