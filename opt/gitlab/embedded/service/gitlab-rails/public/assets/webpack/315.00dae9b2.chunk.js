(this.webpackJsonp=this.webpackJsonp||[]).push([[315],{"8pn6":function(e,t,r){"use strict";var n=r("ZfjD"),s=r("WG2a").findIndex,a=r("x5C5"),i=r("sRF7"),c=!0,o=i("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!o},{findIndex:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("findIndex")},FxFN:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("IdsT"),r("S26F");var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return parseInt((e||"").replace(/gid:\/\/gitlab\/.*\//g,""),10)||null}},KZHv:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"setNamespace",(function(){return P})),r.d(n,"setStorageKey",(function(){return C})),r.d(n,"requestFrequentItems",(function(){return T})),r.d(n,"receiveFrequentItemsSuccess",(function(){return Q})),r.d(n,"receiveFrequentItemsError",(function(){return R})),r.d(n,"fetchFrequentItems",(function(){return L})),r.d(n,"requestSearchedItems",(function(){return D})),r.d(n,"receiveSearchedItemsSuccess",(function(){return M})),r.d(n,"receiveSearchedItemsError",(function(){return A})),r.d(n,"fetchSearchedItems",(function(){return N})),r.d(n,"setSearchQuery",(function(){return U})),r.d(n,"default",(function(){return x}));var s={};r.r(s),r.d(s,"hasSearchQuery",(function(){return G})),r.d(s,"default",(function(){return k}));r("va8A"),r("9U97"),r("kO4A"),r("8pn6"),r("+kFb"),r("zCcL"),r("zpLX"),r("BD5p"),r("Id6h");var a=r("yi8e"),i=r("FkSe"),c=r("n7CP"),o=r("N79w"),u=r("jB52"),l=r("qPgm"),d=(r("FMw2"),r("MRnW"),r("GzNv"),r("mA6J")),p=r.n(d),m=r("eVUo"),f=r("7LcW"),h=r.n(f),g=r("/lV4"),y=20,b=5,O=3,E=3,v={projects:"frequent-projects",groups:"frequent-groups"},S={projects:{loadingMessage:Object(g.d)("ProjectsDropdown|Loading projects"),header:Object(g.d)("ProjectsDropdown|Frequently visited"),itemListErrorMessage:Object(g.d)("ProjectsDropdown|This feature requires browser localStorage support"),itemListEmptyMessage:Object(g.d)("ProjectsDropdown|Projects you visit often will appear here"),searchListErrorMessage:Object(g.d)("ProjectsDropdown|Something went wrong on our end."),searchListEmptyMessage:Object(g.d)("ProjectsDropdown|Sorry, no projects matched your search"),searchInputPlaceholder:Object(g.d)("ProjectsDropdown|Search your projects")},groups:{loadingMessage:Object(g.d)("GroupsDropdown|Loading groups"),header:Object(g.d)("GroupsDropdown|Frequently visited"),itemListErrorMessage:Object(g.d)("GroupsDropdown|This feature requires browser localStorage support"),itemListEmptyMessage:Object(g.d)("GroupsDropdown|Groups you visit often will appear here"),searchListErrorMessage:Object(g.d)("GroupsDropdown|Something went wrong on our end."),searchListEmptyMessage:Object(g.d)("GroupsDropdown|Sorry, no groups matched your search"),searchInputPlaceholder:Object(g.d)("GroupsDropdown|Search your groups")}};function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w,q=function(){return["md","sm","xs"].includes(m.b.getBreakpointSize())},F=function(e){var t=function(t){return Object.prototype.hasOwnProperty.call(e,t)?_({},t,h()(e[t].toString(),{allowedTags:[]})):{}};return I(I(I({},e),t("name")),t("namespace"))},P=function(e,t){(0,e.commit)("SET_NAMESPACE",t)},C=function(e,t){(0,e.commit)("SET_STORAGE_KEY",t)},T=function(e){(0,e.commit)("REQUEST_FREQUENT_ITEMS")},Q=function(e,t){(0,e.commit)("RECEIVE_FREQUENT_ITEMS_SUCCESS",t)},R=function(e){(0,e.commit)("RECEIVE_FREQUENT_ITEMS_ERROR")},L=function(e){var t=e.state,r=e.dispatch;if(r("requestFrequentItems"),c.a.isLocalStorageAccessSafe()){var n=JSON.parse(localStorage.getItem(t.storageKey));r("receiveFrequentItemsSuccess",n?function(e){if(!e)return[];var t=q()?O:b,r=e.filter((function(e){return e.frequency>=E}));return r&&0!==r.length?(r.sort((function(e,t){return e.frequency!==t.frequency?t.frequency-e.frequency:e.lastAccessedOn!==t.lastAccessedOn?t.lastAccessedOn-e.lastAccessedOn:0})),p()(r,t)):[]}(n):[])}else r("receiveFrequentItemsError")},D=function(e){(0,e.commit)("REQUEST_SEARCHED_ITEMS")},M=function(e,t){(0,e.commit)("RECEIVE_SEARCHED_ITEMS_SUCCESS",t)},A=function(e){(0,e.commit)("RECEIVE_SEARCHED_ITEMS_ERROR")},N=function(e,t){var r=e.state,n=e.dispatch;n("requestSearchedItems");var s={simple:!0,per_page:20,membership:Boolean(gon.current_user_id)};return"projects"===r.namespace&&(s.order_by="last_activity_at"),l.a[r.namespace](t,s).then((function(e){n("receiveSearchedItemsSuccess",e)})).catch((function(){n("receiveSearchedItemsError")}))},U=function(e,t){var r=e.commit,n=e.dispatch;r("SET_SEARCH_QUERY",t),t?n("fetchSearchedItems",t):n("fetchFrequentItems")},x=function(){},G=function(e){return""!==e.searchQuery},k=function(){};r("Z5ek"),r("8Qi2"),r("EWC9");function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=(z(w={},"SET_NAMESPACE",(function(e,t){Object.assign(e,{namespace:t})})),z(w,"SET_STORAGE_KEY",(function(e,t){Object.assign(e,{storageKey:t})})),z(w,"SET_SEARCH_QUERY",(function(e,t){var r=""!==t;Object.assign(e,{searchQuery:t,isLoadingItems:!0,hasSearchQuery:r})})),z(w,"REQUEST_FREQUENT_ITEMS",(function(e){Object.assign(e,{isLoadingItems:!0,hasSearchQuery:!1})})),z(w,"RECEIVE_FREQUENT_ITEMS_SUCCESS",(function(e,t){Object.assign(e,{items:t,isLoadingItems:!1,hasSearchQuery:!1,isFetchFailed:!1})})),z(w,"RECEIVE_FREQUENT_ITEMS_ERROR",(function(e){Object.assign(e,{isLoadingItems:!1,hasSearchQuery:!1,isFetchFailed:!0})})),z(w,"REQUEST_SEARCHED_ITEMS",(function(e){Object.assign(e,{isLoadingItems:!0,hasSearchQuery:!0})})),z(w,"RECEIVE_SEARCHED_ITEMS_SUCCESS",(function(e,t){var r=t.data?t.data:t;Object.assign(e,{items:r.map((function(e){return{id:e.id,name:e.name,namespace:e.name_with_namespace||e.full_name,webUrl:e.web_url,avatarUrl:e.avatar_url}})),isLoadingItems:!1,hasSearchQuery:!0,isFetchFailed:!1})})),z(w,"RECEIVE_SEARCHED_ITEMS_ERROR",(function(e){Object.assign(e,{isLoadingItems:!1,hasSearchQuery:!0,isFetchFailed:!0})})),w);u.default.use(a.b);r("IdsT"),r("TZoF");var H=r("Tmea"),V=r.n(H),$=r("len0");r("yaFd");function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y={props:{namespace:{type:String,required:!0}},methods:{getTranslations:function(e){var t=this;return e.reduce((function(e,r){return J(J({},e),{},W({},r,S[t.namespace][r]))}),{})}}};function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var te={components:{Icon:$.a},mixins:[Y],data:function(){return{searchQuery:""}},computed:{translations:function(){return this.getTranslations(["searchInputPlaceholder"])}},watch:{searchQuery:V()((function(){this.setSearchQuery(this.searchQuery)}),500)},mounted:function(){o.a.$on("".concat(this.namespace,"-dropdownOpen"),this.setFocus)},beforeDestroy:function(){o.a.$off("".concat(this.namespace,"-dropdownOpen"),this.setFocus)},methods:X(X({},Object(a.c)(["setSearchQuery"])),{},{setFocus:function(){this.$refs.search.focus()}})},re=r("tBpV"),ne=Object(re.a)(te,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-input-container d-none d-sm-block"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],ref:"search",staticClass:"form-control",attrs:{placeholder:e.translations.searchInputPlaceholder,type:"search"},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),e._v(" "),e.searchQuery?e._e():r("icon",{staticClass:"search-icon",attrs:{name:"search"}})],1)}),[],!1,null,null,null).exports,se=(r("+xU6"),r("nBaz")),ae=(r("gyUR"),r("QifN"),r("l9AF"),r("pBsb"),r("PxiM")),ie=r.n(ae);var ce=r("0AwG"),oe={components:{Identicon:se.a},props:{matcher:{type:String,required:!1},itemId:{type:Number,required:!0},itemName:{type:String,required:!0},namespace:{type:String,required:!1},webUrl:{type:String,required:!0},avatarUrl:{required:!0,validator:function(e){return null===e||"string"==typeof e}}},computed:{truncatedNamespace:function(){return Object(ce.p)(this.namespace)},highlightedItemName:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"<b>",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"</b>";if(!e)return"";if(!t)return e;var s=h()(e.toString(),{allowedTags:[]}),a=ie.a.match(s,t.toString());return s.split("").map((function(e,t){return a.includes(t)?"".concat(r).concat(e).concat(n):e})).join("")}(this.itemName,this.matcher)}}},ue={components:{FrequentItemsListItem:Object(re.a)(oe,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"frequent-items-list-item-container"},[r("a",{staticClass:"clearfix",attrs:{href:e.webUrl}},[r("div",{ref:"frequentItemsItemAvatarContainer",staticClass:"frequent-items-item-avatar-container avatar-container rect-avatar s32"},[e.avatarUrl?r("img",{ref:"frequentItemsItemAvatar",staticClass:"avatar s32",attrs:{src:e.avatarUrl}}):r("identicon",{staticClass:"rect-avatar",attrs:{"entity-id":e.itemId,"entity-name":e.itemName,"size-class":"s32"}})],1),e._v(" "),r("div",{ref:"frequentItemsItemMetadataContainer",staticClass:"frequent-items-item-metadata-container"},[r("div",{ref:"frequentItemsItemTitle",staticClass:"frequent-items-item-title",attrs:{title:e.itemName},domProps:{innerHTML:e._s(e.highlightedItemName)}}),e._v(" "),e.namespace?r("div",{ref:"frequentItemsItemNamespace",staticClass:"frequent-items-item-namespace",attrs:{title:e.namespace}},[e._v("\n        "+e._s(e.truncatedNamespace)+"\n      ")]):e._e()])])])}),[],!1,null,null,null).exports},mixins:[Y],props:{items:{type:Array,required:!0},hasSearchQuery:{type:Boolean,required:!0},isFetchFailed:{type:Boolean,required:!0},matcher:{type:String,required:!0}},computed:{translations:function(){return this.getTranslations(["itemListEmptyMessage","itemListErrorMessage","searchListEmptyMessage","searchListErrorMessage"])},isListEmpty:function(){return 0===this.items.length},listEmptyMessage:function(){return this.hasSearchQuery?this.isFetchFailed?this.translations.searchListErrorMessage:this.translations.searchListEmptyMessage:this.isFetchFailed?this.translations.itemListErrorMessage:this.translations.itemListEmptyMessage},sanitizedItems:function(){return this.items.map(F)}}};function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var me={store:function(){return new a.b.Store({actions:n,getters:s,mutations:B,state:{namespace:"",storageKey:"",searchQuery:"",isLoadingItems:!1,isFetchFailed:!1,items:[]}})},components:{FrequentItemsSearchInput:ne,FrequentItemsList:Object(re.a)(ue,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"frequent-items-list-container"},[r("ul",{ref:"frequentItemsList",staticClass:"list-unstyled"},[e.isListEmpty?r("li",{staticClass:"section-empty",class:{"section-failure":e.isFetchFailed}},[e._v("\n      "+e._s(e.listEmptyMessage)+"\n    ")]):e._l(e.sanitizedItems,(function(t){return r("frequent-items-list-item",{key:t.id,attrs:{"item-id":t.id,"item-name":t.name,namespace:t.namespace,"web-url":t.webUrl,"avatar-url":t.avatarUrl,matcher:e.matcher}})}))],2)])}),[],!1,null,null,null).exports,GlLoadingIcon:i.a},mixins:[Y],props:{currentUserName:{type:String,required:!0},currentItem:{type:Object,required:!0}},computed:de(de(de({},Object(a.e)(["searchQuery","isLoadingItems","isFetchFailed","items"])),Object(a.d)(["hasSearchQuery"])),{},{translations:function(){return this.getTranslations(["loadingMessage","header"])}}),created:function(){var e=this.namespace,t=this.currentUserName,r=this.currentItem,n="".concat(t,"/").concat(v[e]);this.setNamespace(e),this.setStorageKey(n),r.id&&this.logItemAccess(n,r),o.a.$on("".concat(this.namespace,"-dropdownOpen"),this.dropdownOpenHandler);var s=document.getElementById("nav-".concat(this.namespace,"-dropdown"));s&&s.classList.contains("show")&&this.dropdownOpenHandler()},beforeDestroy:function(){o.a.$off("".concat(this.namespace,"-dropdownOpen"),this.dropdownOpenHandler)},methods:de(de({},Object(a.c)(["setNamespace","setStorageKey","fetchFrequentItems"])),{},{dropdownOpenHandler:function(){(""===this.searchQuery||q())&&this.fetchFrequentItems()},logItemAccess:function(e,t){var r=F(t);if(!c.a.isLocalStorageAccessSafe())return!1;var n=localStorage.getItem(e),s=n?JSON.parse(n):[de(de({},r),{},{frequency:1})],a=s.findIndex((function(e){return e.id===r.id}));return a>-1?s[a]=function(e,t){var r=Math.abs(t.lastAccessedOn-e.lastAccessedOn)/36e5>1;return I(I({},t),{},{frequency:r?e.frequency+1:e.frequency,lastAccessedOn:r?Date.now():e.lastAccessedOn})}(s[a],r):(s.length===y&&s.shift(),s.push(de(de({},r),{},{frequency:1}))),localStorage.setItem(e,JSON.stringify(s))}})},fe=Object(re.a)(me,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("frequent-items-search-input",{attrs:{namespace:e.namespace}}),e._v(" "),e.isLoadingItems?r("gl-loading-icon",{staticClass:"loading-animation prepend-top-20",attrs:{label:e.translations.loadingMessage,size:"lg"}}):e._e(),e._v(" "),e.isLoadingItems||e.hasSearchQuery?e._e():r("div",{staticClass:"section-header"},[e._v("\n    "+e._s(e.translations.header)+"\n  ")]),e._v(" "),e.isLoadingItems?e._e():r("frequent-items-list",{attrs:{items:e.items,namespace:e.namespace,"has-search-query":e.hasSearchQuery,"is-fetch-failed":e.isFetchFailed,matcher:e.searchQuery}})],1)}),[],!1,null,null,null);t.default=fe.exports},mA6J:function(e,t,r){var n=r("zx4+"),s=r("NDsS");e.exports=function(e,t,r){return e&&e.length?(t=r||void 0===t?1:s(t),n(e,0,t<0?0:t)):[]}},nBaz:function(e,t,r){"use strict";r("+xU6"),r("9U97"),r("8Qi2"),r("G3fq");var n=r("0AwG"),s=r("FxFN"),a=7;function i(e){var t="string"==typeof e?Object(s.a)(e):e;return"bg".concat(t%a+1)}function c(e){return Object(n.g)(e)||" "}var o={props:{entityId:{type:[Number,String],required:!0},entityName:{type:String,required:!0},sizeClass:{type:String,required:!1,default:"s40"}},computed:{identiconBackgroundClass:function(){return i(this.entityId)},identiconTitle:function(){return c(this.entityName)}}},u=r("tBpV"),l=Object(u.a)(o,(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"identicon",staticClass:"avatar identicon",class:[this.sizeClass,this.identiconBackgroundClass]},[this._v("\n  "+this._s(this.identiconTitle)+"\n")])}),[],!1,null,null,null);t.a=l.exports},"zx4+":function(e,t){e.exports=function(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(s);++n<s;)a[n]=e[n+t];return a}}}]);
//# sourceMappingURL=315.00dae9b2.chunk.js.map