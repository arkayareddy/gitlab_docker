(this.webpackJsonp=this.webpackJsonp||[]).push([[194],{98:function(t,e,n){n("HVBj"),n("gjpc"),t.exports=n("uCCZ")},CX32:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));n("va8A"),n("z4I3"),n("dj/k"),n("x/6R"),n("WQYg"),n("MRnW"),n("EfZm"),n("GzNv"),n("tbvx"),n("orcL");var r=n("t6Yz"),a=n.n(r),o=n("yQ8t");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var a=l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(n,t);var e=s(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=e.call(this),a.a.bind("g p",(function(){return Object(o.a)(".shortcuts-project")})),a.a.bind("g v",(function(){return Object(o.a)(".shortcuts-project-activity")})),a.a.bind("g r",(function(){return Object(o.a)(".shortcuts-project-releases")})),a.a.bind("g f",(function(){return Object(o.a)(".shortcuts-tree")})),a.a.bind("g c",(function(){return Object(o.a)(".shortcuts-commits")})),a.a.bind("g j",(function(){return Object(o.a)(".shortcuts-builds")})),a.a.bind("g n",(function(){return Object(o.a)(".shortcuts-network")})),a.a.bind("g d",(function(){return Object(o.a)(".shortcuts-repository-charts")})),a.a.bind("g i",(function(){return Object(o.a)(".shortcuts-issues")})),a.a.bind("g b",(function(){return Object(o.a)(".shortcuts-issue-boards")})),a.a.bind("g m",(function(){return Object(o.a)(".shortcuts-merge_requests")})),a.a.bind("g w",(function(){return Object(o.a)(".shortcuts-wiki")})),a.a.bind("g s",(function(){return Object(o.a)(".shortcuts-snippets")})),a.a.bind("g k",(function(){return Object(o.a)(".shortcuts-kubernetes")})),a.a.bind("g e",(function(){return Object(o.a)(".shortcuts-environments")})),a.a.bind("g l",(function(){return Object(o.a)(".shortcuts-metrics")})),a.a.bind("i",(function(){return Object(o.a)(".shortcuts-new-issue")})),t}return n}(n("v+Mp").a)},ZeWX:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));n("t3Gg"),n("+xeR");var r=n("3a3M"),a=n.n(r),o=n("06tH"),i=n.n(o),c=n("/lV4"),s=n("3twG");n("kO4A"),n("OZM5"),n("x/6R"),n("Z5ek"),n("yaFd"),n("8Qi2"),n("EWC9"),n("MRnW"),n("tbvx"),n("orcL");var u=function(t){return t.reduce((function(t,e){var n=e.name,r=e.value;return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,r))}),{})},l=n("2ibD"),d=n("XRO8"),f=n("k/Fq");function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=a()("ul.clone-options-dropdown"),n=a()("#project_clone"),r=a()(".js-git-clone-holder .js-clone-dropdown-label"),o=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),c=r.text().trim();c.length>0&&a()("a:contains('".concat(c,"')"),e).addClass("is-active"),a()("a",e).on("click",(function(t){t.preventDefault();var r=a()(t.currentTarget),i=r.attr("href"),c=r.data("cloneType");a()(".is-active",e).removeClass("is-active"),a()('a[data-clone-type="'.concat(c,'"]')).each((function(){var t=a()(this),e=t.find(".dropdown-menu-inner-title").text(),n=t.closest(".project-clone-holder").find(".js-clone-dropdown-label");t.toggleClass("is-active"),n.text(e)})),o?o.dataset.clipboardText=i:n.val(i),a()(".js-git-empty .js-clone").text(i)})),t.initRefSwitcher(),a()(".project-refs-select").on("change",(function(){return a()(this).parents("form").submit()})),a()(".hide-no-ssh-message").on("click",(function(t){return i.a.set("hide_no_ssh_message","false"),a()(this).parents(".no-ssh-key-message").remove(),t.preventDefault()})),a()(".hide-no-password-message").on("click",(function(t){return i.a.set("hide_no_password_message","false"),a()(this).parents(".no-password-message").remove(),t.preventDefault()})),a()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(t){var e=a()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(e);return i.a.set(n,"false"),a()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),t.preventDefault()})),t.projectSelectDropdown()}var e,n,r;return e=t,r=[{key:"projectSelectDropdown",value:function(){Object(f.a)(),a()(".project-item-select").on("click",(function(e){return t.changeProject(a()(e.currentTarget).val())}))}},{key:"changeProject",value:function(t){return window.location=t}},{key:"initRefSwitcher",value:function(){var t=document.createElement("li"),e=document.createElement("a");return e.href="#",a()(".js-project-refs-dropdown").each((function(){var n,r,o,i=a()(this),f=i.data("selected"),h=i.data("fieldName"),p=Boolean(i.data("visit")),b=i.closest("form"),m=b.attr("action"),g=Object(s.n)((n=b[0],r=new FormData(n),o=Array.from(r.keys()).map((function(t){var e=r.getAll(t);return{name:t,value:1===(e=e.filter((function(t){return t}))).length?e[0]:e}})),u(o)),m);return i.glDropdown({data:function(t,e){l.a.get(i.data("refsUrl"),{params:{ref:i.data("ref"),search:t}}).then((function(t){var n=t.data;return e(n)})).catch((function(){return Object(d.a)(Object(c.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:i.data("inputFieldName"),fieldName:h,renderRow:function(n){var r,a,o,i=t.cloneNode(!1),c=e.cloneNode(!1);return n===f&&(c.className="is-active"),c.textContent=n,c.dataset.ref=n,n.length>0&&p&&(c.href=Object(s.n)((o=n,(a=h)in(r={})?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,r),g)),i.appendChild(c),i},id:function(t,e){return e.attr("data-ref")},toggleLabel:function(t,e){return e.text().trim()},clicked:function(t){var e=t.e;p||e.preventDefault()}})}))}}],(n=null)&&h(e.prototype,n),r&&h(e,r),t}()},gjpc:function(t,e,n){"use strict";n.r(e);var r=n("ZeWX"),a=n("CX32");document.addEventListener("DOMContentLoaded",(function(){new r.a,new a.a}))},"k/Fq":function(t,e,n){"use strict";n("9U97"),n("8Qi2"),n("MRnW"),n("jaBk");var r=n("3a3M"),a=n.n(r),o=n("qPgm"),i=(n("gyUR"),n("4ql4"),n("IdsT"),n("pBsb"),n("n7CP"));function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectSelectInput=a()(e),this.newItemBtn=a()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var e,r,o;return e=t,(r=[{key:"bindEvents",value:function(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(e){return t.openDropdown(e)})),this.newItemBtn.on("click",(function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))})),this.projectSelectInput.on("change",(function(){return t.selectProject()}))}},{key:"initLocalStorage",value:function(){i.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(t){n.e(311).then(n.t.bind(null,"p9g0",7)).then((function(){a()(t.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}},{key:"setBtnTextFromLocalStorage",value:function(){var t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}},{key:"setNewItemBtnAttributes",value:function(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}},{key:"setProjectInLocalStorage",value:function(t){var e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}},{key:"deriveTextVariants",value:function(){var t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&c(e.prototype,r),o&&c(e,o),t}(),u=n("/lV4"),l=function(){a()(".ajax-project-select").each((function(t,e){var n,r=this,i=a()(e).data("simpleFilter")||!1,c=a()(e).data("select2");return this.groupId=a()(e).data("groupId"),this.userId=a()(e).data("userId"),this.includeGroups=a()(e).data("includeGroups"),this.allProjects=a()(e).data("allProjects")||!1,this.orderBy=a()(e).data("orderBy")||"id",this.withIssuesEnabled=a()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=a()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===a()(e).data("withShared")||a()(e).data("withShared"),this.includeProjectsInSubgroups=a()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=a()(e).data("allowClear")||!1,n=Object(u.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(u.d)("ProjectSelect| or group")),a()(e).select2({placeholder:n,minimumInputLength:0,query:function(t){var e,n=function(e){var n={results:e};return t.callback(n)};return e=r.includeGroups?function(e){return o.a.groups(t.term,{},(function(t){var r=t.concat(e);return n(r)}))}:n,r.groupId?o.a.groupProjects(r.groupId,t.term,{search_namespaces:!0,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},e):r.userId?o.a.userProjects(r.userId,t.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},e):o.a.projects(t.term,{order_by:r.orderBy,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,membership:!r.allProjects},e)},id:function(t){return i?t.id:JSON.stringify({name:t.name,url:t.web_url})},text:function(t){return t.name_with_namespace||t.name},initSelection:function(t,e){return o.a.project(t.val()).then((function(t){var n=t.data;return e(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),c||i?e:new s(e)}))};e.a=function(){return n.e(311).then(n.t.bind(null,"p9g0",7)).then(l).catch((function(){}))}},uCCZ:function(t,e,n){"use strict";n.r(e);n("IdsT"),n("l9AF");var r=n("3a3M"),a=n.n(r);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"init",value:function(){var e=a()(".js-ajax-loading-spinner");e.on("ajax:beforeSend",t.ajaxBeforeSend),e.on("ajax:complete",t.ajaxComplete)}},{key:"ajaxBeforeSend",value:function(e){e.target.setAttribute("disabled","");var n=e.target.querySelector("i"),r=n.className.match(/(fa-)([^\s]+)/g)[0];n.dataset.icon=r,t.toggleLoadingIcon(n),a()(e.target).off("ajax:beforeSend",t.ajaxBeforeSend)}},{key:"ajaxComplete",value:function(e){e.target.removeAttribute("disabled");var n=e.target.querySelector("i");t.toggleLoadingIcon(n),a()(e.target).off("ajax:complete",t.ajaxComplete)}},{key:"toggleLoadingIcon",value:function(t){var e=t.classList;e.toggle(t.dataset.icon),e.toggle("fa-spinner"),e.toggle("fa-spin")}}],(n=null)&&o(e.prototype,n),r&&o(e,r),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s="#modal-delete-branch",u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$modal=a()(s),this.$toggleBtns=a()('[data-target="'.concat(s,'"]')),this.$branchName=a()(".js-branch-name",this.$modal),this.$confirmInput=a()(".js-delete-branch-input",this.$modal),this.$deleteBtn=a()(".js-delete-branch",this.$modal),this.$notMerged=a()(".js-not-merged",this.$modal),this.bindEvents()}var e,n,r;return e=t,(n=[{key:"bindEvents",value:function(){this.$toggleBtns.on("click",this.setModalData.bind(this)),this.$confirmInput.on("input",this.setDeleteDisabled.bind(this)),this.$deleteBtn.on("click",this.setDisableDeleteButton.bind(this))}},{key:"setModalData",value:function(t){var e=t.currentTarget.dataset;this.branchName=e.branchName||"",this.deletePath=e.deletePath||"",this.isMerged=Boolean(e.isMerged),this.updateModal()}},{key:"setDeleteDisabled",value:function(t){this.$deleteBtn.attr("disabled",t.currentTarget.value!==this.branchName)}},{key:"setDisableDeleteButton",value:function(t){return!this.$deleteBtn.is("[disabled]")||(t.preventDefault(),t.stopPropagation(),!1)}},{key:"updateModal",value:function(){this.$branchName.text(this.branchName),this.$confirmInput.val(""),this.$deleteBtn.attr("href",this.deletePath),this.$deleteBtn.attr("disabled",!0),this.$notMerged.toggleClass("hidden",this.isMerged)}}])&&c(e.prototype,n),r&&c(e,r),t}(),l=(n("va8A"),n("z4I3"),n("dj/k"),n("+kFb"),n("OZM5"),n("x/6R"),n("Z5ek"),n("yaFd"),n("4ql4"),n("8Qi2"),n("5j0x"),n("MRnW"),n("N0ZT"),n("GzNv"),n("tbvx"),n("Id6h"),n("orcL"),n("jB52")),d=n("/lV4"),f=n("XRO8"),h=n("2ibD"),p=(n("+xU6"),"full"),b="left",m="right",g={props:{position:{type:String,required:!0},count:{type:Number,required:!0},maxCommits:{type:Number,required:!0}},computed:{label:function(){return this.count>=1e3?"".concat(999,"+"):this.count},barGraphWidthFactor:function(){return this.maxCommits>0?100/this.maxCommits:0},style:function(){return{width:"".concat(this.count*this.barGraphWidthFactor,"%")}},isFullWidth:function(){return this.position===p},isLeftSide:function(){return this.position===b},roundedClass:function(){return this.isFullWidth?"rounded":"rounded-".concat(this.position)},textAlignmentClass:function(){return this.isFullWidth?"text-center":"text-".concat(this.isLeftSide?m:b)},positionSideClass:function(){return"position-".concat(this.isLeftSide?m:b,"-0")}}},v=n("tBpV"),y={components:{GraphBar:Object(v.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"position-relative pull-left pt-1 graph-side h-100",class:{full:t.isFullWidth}},[n("div",{staticClass:"position-absolute bar js-graph-bar",class:[t.roundedClass,t.positionSideClass],style:t.style}),t._v(" "),n("span",{staticClass:"d-block pt-1 pr-1 count js-graph-count",class:t.textAlignmentClass},[t._v("\n    "+t._s(t.label)+"\n  ")])])}),[],!1,null,null,null).exports},props:{defaultBranch:{type:String,required:!0},distance:{type:Number,required:!1,default:null},aheadCount:{type:Number,required:!0},behindCount:{type:Number,required:!0},maxCommits:{type:Number,required:!0}},computed:{title:function(){return this.distance?Object(d.e)(Object(d.a)("More than %{number_commits_distance} commits different with %{default_branch}"),{number_commits_distance:this.distance>=1e3?"".concat(999,"+"):this.distance,default_branch:this.defaultBranch}):Object(d.e)(Object(d.a)("%{number_commits_behind} commits behind %{default_branch}, %{number_commits_ahead} commits ahead"),{number_commits_behind:this.behindCount,number_commits_ahead:this.aheadCount,default_branch:this.defaultBranch})}}},j=Object(v.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"divergence-graph px-2 d-none d-md-block",attrs:{title:t.title}},[t.distance?[n("graph-bar",{attrs:{count:t.distance,"max-commits":t.maxCommits,position:"full"}})]:[n("graph-bar",{attrs:{count:t.behindCount,"max-commits":t.maxCommits,position:"left"}}),t._v(" "),n("div",{staticClass:"graph-separator pull-left mt-1"}),t._v(" "),n("graph-bar",{attrs:{count:t.aheadCount,"max-commits":t.maxCommits,position:"right"}})]],2)}),[],!1,null,null,null).exports;function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(t,e)||x(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var O=function(t){var e=S(document.querySelectorAll(".js-branch-item")).map((function(t){return t.dataset.name}));return 0===e.length||h.a.get(t,{params:{names:e}}).then((function(t){var e=t.data,n=Object.entries(e).reduce((function(t,e){var n=w(e,2)[1],r=Math.max.apply(Math,S(Object.values(n)));return r>t?r:t}),100);Object.entries(e).forEach((function(t){var e=w(t,2),r=e[0],a=e[1],o=document.querySelector('[data-name="'.concat(r,'"] .js-branch-divergence-graph'));o&&function(t,e,n){new l.default({el:t,render:function(t){return t(j,{props:{defaultBranch:"master",distance:e.distance?parseInt(e.distance,10):null,aheadCount:parseInt(e.ahead,10),behindCount:parseInt(e.behind,10),maxCommits:n}})}})}(o,a,n)}))})).catch((function(){return Object(f.a)(Object(d.a)("Error fetching diverging counts for branches. Please try again."))}))};document.addEventListener("DOMContentLoaded",(function(){i.init(),new u,O(document.querySelector(".js-branch-list").dataset.divergingCountsEndpoint)}))}},[[98,1,0]]]);
//# sourceMappingURL=pages.projects.branches.index.28f2d692.chunk.js.map